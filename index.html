<!doctype html>
<head>
<title>江ノ電運用報告文面作成ツール</title>
<meta charset="utf-8">
<meta http-equiv="x-ua-compatible" content="IE=edge">
<meta http-equiv="content-language" content="ja">
<meta name="viewport" content="width=device-width,initial-scale=1">
<script type="text/javascript" nonce="6882e7805758487686880a230a2" src="//local.adguard.org?ts=1758355777935&amp;type=content-script&amp;dmn=web.fc2.com&amp;url=https%3A%2F%2Fweb.fc2.com%2Fcontrolpanel%2Ffilemanager%2Fconnector%2F%3Fcmd%3Dfile%26target%3Df1_aW5kZXguaHRtbA%26_t%3D1757847660%26download%3D1%26cpath%3D%2Fcontrolpanel%2Ffilemanager%2F%26reqid%3D19966591651360&amp;app=opera.exe&amp;css=3&amp;js=1&amp;rel=1&amp;rji=1&amp;sbe=1"></script><script type="text/javascript" nonce="6882e7805758487686880a230a2" src="//local.adguard.org?ts=1758355777935&amp;name=AdGuard%20Assistant&amp;name=AdGuard%20Extra&amp;name=AdGuard%20Popup%20Blocker&amp;type=user-script"></script><script type="text/javascript" nonce="6882e7805758487686880a230a2" src="//local.adguard.org?ts=1757831975381&amp;type=content-script&amp;dmn=web.fc2.com&amp;url=https%3A%2F%2Fweb.fc2.com%2Fcontrolpanel%2Ffilemanager%2Fconnector%2F%3Fcmd%3Dfile%26target%3Df1_aW5kZXguaHRtbA%26_t%3D1755961860%26download%3D1%26cpath%3D%2Fcontrolpanel%2Ffilemanager%2F%26reqid%3D199470603a72e1&amp;app=opera.exe&amp;css=3&amp;js=1&amp;rel=1&amp;rji=1&amp;sbe=1"></script><script type="text/javascript" nonce="6882e7805758487686880a230a2" src="//local.adguard.org?ts=1757831975381&amp;name=AdGuard%20Assistant&amp;name=AdGuard%20Extra&amp;name=AdGuard%20Popup%20Blocker&amp;type=user-script"></script><script type="text/javascript" nonce="d5f138d8b4304e00b709cc42d33" src="//local.adguard.org?ts=1755872590358&amp;type=content-script&amp;dmn=web.fc2.com&amp;url=https%3A%2F%2Fweb.fc2.com%2Fcontrolpanel%2Ffilemanager%2Fconnector%2F%3Fcmd%3Dfile%26target%3Df1_aW5kZXguaHRtbA%26_t%3D1754749620%26download%3D1%26cpath%3D%2Fcontrolpanel%2Ffilemanager%2F%26reqid%3D198d74459f51e7&amp;app=opera.exe&amp;css=3&amp;js=1&amp;rel=1&amp;rji=1&amp;sbe=1"></script>
<script type="text/javascript" nonce="d5f138d8b4304e00b709cc42d33" src="//local.adguard.org?ts=1755872590358&amp;name=AdGuard%20Assistant&amp;name=AdGuard%20Extra&amp;name=AdGuard%20Popup%20Blocker&amp;type=user-script"></script><script type="text/javascript" nonce="d5f138d8b4304e00b709cc42d33" src="//local.adguard.org?ts=1754671084279&amp;type=content-script&amp;dmn=web.fc2.com&amp;url=https%3A%2F%2Fweb.fc2.com%2Fcontrolpanel%2Ffilemanager%2Fconnector%2F%3Fcmd%3Dfile%26target%3Df1_aW5kZXguaHRtbA%26_t%3D1753801560%26download%3D1%26cpath%3D%2Fcontrolpanel%2Ffilemanager%2F%26reqid%3D1988f28c87619b&amp;app=opera.exe&amp;css=3&amp;js=1&amp;rel=1&amp;rji=1&amp;sbe=1"></script>
<script type="text/javascript" nonce="d5f138d8b4304e00b709cc42d33" src="//local.adguard.org?ts=1754671084279&amp;name=AdGuard%20Assistant&amp;name=AdGuard%20Extra&amp;name=AdGuard%20Popup%20Blocker&amp;type=user-script"></script><script type="text/javascript" nonce="d5f138d8b4304e00b709cc42d33" src="//local.adguard.org?ts=1753727043556&amp;type=content-script&amp;dmn=web.fc2.com&amp;url=https%3A%2F%2Fweb.fc2.com%2Fcontrolpanel%2Ffilemanager%2Fconnector%2F%3Fcmd%3Dfile%26target%3Df1_aW5kZXguaHRtbA%26_t%3D1753525560%26download%3D1%26cpath%3D%2Fcontrolpanel%2Ffilemanager%2F%26reqid%3D1985671bbd4238&amp;app=opera.exe&amp;css=3&amp;js=1&amp;rel=1&amp;rji=1&amp;sbe=1"></script>
<script type="text/javascript" nonce="d5f138d8b4304e00b709cc42d33" src="//local.adguard.org?ts=1753727043556&amp;name=AdGuard%20Assistant&amp;name=AdGuard%20Extra&amp;name=AdGuard%20Popup%20Blocker&amp;type=user-script"></script><script type="text/javascript" nonce="d5f138d8b4304e00b709cc42d33" src="//local.adguard.org?ts=1753445978073&amp;type=content-script&amp;dmn=web.fc2.com&amp;url=https%3A%2F%2Fweb.fc2.com%2Fcontrolpanel%2Ffilemanager%2Fconnector%2F%3Fcmd%3Dfile%26target%3Df1_aW5kZXguaHRtbA%26_t%3D1750338900%26download%3D1%26cpath%3D%2Fcontrolpanel%2Ffilemanager%2F%26reqid%3D198463589d3b0&amp;app=opera.exe&amp;css=3&amp;js=1&amp;rel=1&amp;rji=1&amp;sbe=1"></script>
<script type="text/javascript" nonce="d5f138d8b4304e00b709cc42d33" src="//local.adguard.org?ts=1753445978073&amp;name=AdGuard%20Assistant&amp;name=AdGuard%20Extra&amp;name=AdGuard%20Popup%20Blocker&amp;type=user-script"></script><script type="text/javascript" nonce="7a103f1efa3347d7aacb673909e" src="//local.adguard.org?ts=1750307642895&amp;type=content-script&amp;dmn=web.fc2.com&amp;url=https%3A%2F%2Fweb.fc2.com%2Fcontrolpanel%2Ffilemanager%2Fconnector%2F%3Fcmd%3Dfile%26target%3Df1_aW5kZXguaHRtbA%26_t%3D1750170780%26download%3D1%26cpath%3D%2Fcontrolpanel%2Ffilemanager%2F%26reqid%3D1978852f2d9275&amp;app=opera.exe&amp;css=3&amp;js=1&amp;rel=1&amp;rji=1&amp;sbe=1"></script>
<script type="text/javascript" nonce="7a103f1efa3347d7aacb673909e" src="//local.adguard.org?ts=1750307642895&amp;name=AdGuard%20Assistant&amp;name=AdGuard%20Extra&amp;name=AdGuard%20Popup%20Blocker&amp;type=user-script"></script><script type="text/javascript" nonce="7a103f1efa3347d7aacb673909e" src="//local.adguard.org?ts=1750136999107&amp;type=content-script&amp;dmn=web.fc2.com&amp;url=https%3A%2F%2Fweb.fc2.com%2Fcontrolpanel%2Ffilemanager%2Fconnector%2F%3Fcmd%3Dfile%26target%3Df1_aW5kZXguaHRtbA%26_t%3D1746709260%26download%3D1%26cpath%3D%2Fcontrolpanel%2Ffilemanager%2F%26reqid%3D1977e4bd17013a&amp;app=opera.exe&amp;css=3&amp;js=1&amp;rel=1&amp;rji=1&amp;sbe=1"></script>
<script type="text/javascript" nonce="7a103f1efa3347d7aacb673909e" src="//local.adguard.org?ts=1750136999107&amp;name=AdGuard%20Assistant&amp;name=AdGuard%20Extra&amp;name=AdGuard%20Popup%20Blocker&amp;type=user-script"></script><script type="text/javascript" nonce="9d5a59ece62d42f8a572621c397" src="//local.adguard.org?ts=1746548215535&amp;type=content-script&amp;dmn=web.fc2.com&amp;url=https%3A%2F%2Fweb.fc2.com%2Fcontrolpanel%2Ffilemanager%2Fconnector%2F%3Fcmd%3Dfile%26target%3Df1_aW5kZXguaHRtbA%26_t%3D1744027500%26download%3D1%26cpath%3D%2Fcontrolpanel%2Ffilemanager%2F%26reqid%3D196ab1047cf258&amp;app=opera.exe&amp;css=3&amp;js=1&amp;rel=1&amp;rji=1&amp;sbe=1"></script>
<script type="text/javascript" nonce="9d5a59ece62d42f8a572621c397" src="//local.adguard.org?ts=1746548215535&amp;name=AdGuard%20Assistant&amp;name=AdGuard%20Extra&amp;name=AdGuard%20Popup%20Blocker&amp;type=user-script"></script><script type="text/javascript" nonce="a72be1cf726644b6960f96cdff1" src="//local.adguard.org?ts=1743942198521&amp;type=content-script&amp;dmn=web.fc2.com&amp;url=https%3A%2F%2Fweb.fc2.com%2Fcontrolpanel%2Ffilemanager%2Fconnector%2F%3Fcmd%3Dfile%26target%3Df1_aW5kZXguaHRtbA%26_t%3D1742565240%26download%3D1%26cpath%3D%2Fcontrolpanel%2Ffilemanager%2F%26reqid%3D19610088f711cf&amp;app=opera.exe&amp;css=3&amp;js=1&amp;rel=1&amp;rji=1&amp;sbe=1"></script>
<script type="text/javascript" nonce="a72be1cf726644b6960f96cdff1" src="//local.adguard.org?ts=1743942198521&amp;name=AdGuard%20Assistant&amp;name=AdGuard%20Extra&amp;name=AdGuard%20Popup%20Blocker&amp;type=user-script"></script><script type="text/javascript" nonce="afdb8032ec3b44b2916cfbf3c2e" src="//local.adguard.org?ts=1742504962628&amp;type=content-script&amp;dmn=web.fc2.com&amp;url=https%3A%2F%2Fweb.fc2.com%2Fcontrolpanel%2Ffilemanager%2Fconnector%2F%3Fcmd%3Dfile%26target%3Df1_aW5kZXguaHRtbA%26_t%3D1741965660%26download%3D1%26cpath%3D%2Fcontrolpanel%2Ffilemanager%2F%26reqid%3D195b8d0ae3d168&amp;app=opera.exe&amp;css=3&amp;js=1&amp;rel=1&amp;rji=1&amp;sbe=1"></script>
<script type="text/javascript" nonce="afdb8032ec3b44b2916cfbf3c2e" src="//local.adguard.org?ts=1742504962628&amp;name=AdGuard%20Assistant&amp;name=AdGuard%20Extra&amp;name=AdGuard%20Popup%20Blocker&amp;type=user-script"></script><script type="text/javascript" nonce="afdb8032ec3b44b2916cfbf3c2e" src="//local.adguard.org?ts=1741903583586&amp;type=content-script&amp;dmn=web.fc2.com&amp;url=https%3A%2F%2Fweb.fc2.com%2Fcontrolpanel%2Ffilemanager%2Fconnector%2F%3Fcmd%3Dfile%26target%3Df1_aW5kZXguaHRtbA%26_t%3D1740754080%26download%3D1%26cpath%3D%2Fcontrolpanel%2Ffilemanager%2F%26reqid%3D195952b4789c1&amp;app=opera.exe&amp;css=3&amp;js=1&amp;rel=1&amp;rji=1&amp;sbe=1"></script>
<script type="text/javascript" nonce="afdb8032ec3b44b2916cfbf3c2e" src="//local.adguard.org?ts=1741903583586&amp;name=AdGuard%20Assistant&amp;name=AdGuard%20Extra&amp;name=AdGuard%20Popup%20Blocker&amp;type=user-script"></script><script type="text/javascript" nonce="c17466199dee4d24bb8d63b3f6f" src="//local.adguard.org?ts=1740750540170&amp;type=content-script&amp;dmn=web.fc2.com&amp;url=https%3A%2F%2Fweb.fc2.com%2Fcontrolpanel%2Ffilemanager%2Fconnector%2F%3Fcmd%3Dfile%26target%3Df1_aW5kZXguaHRtbA%26_t%3D1740665400%26download%3D1%26cpath%3D%2Fcontrolpanel%2Ffilemanager%2F%26reqid%3D1954cd77a22263&amp;app=opera.exe&amp;css=3&amp;js=1&amp;rel=1&amp;rji=1&amp;sbe=1"></script>
<script type="text/javascript" nonce="c17466199dee4d24bb8d63b3f6f" src="//local.adguard.org?ts=1740750540170&amp;name=AdGuard%20Assistant&amp;name=AdGuard%20Extra&amp;name=AdGuard%20Popup%20Blocker&amp;type=user-script"></script><script type="text/javascript" nonce="783214f0a87143339a8fc4ff1b0" src="//local.adguard.org?ts=1740664045248&amp;type=content-script&amp;dmn=web.fc2.com&amp;url=https%3A%2F%2Fweb.fc2.com%2Fcontrolpanel%2Ffilemanager%2Fconnector%2F%3Fcmd%3Dfile%26target%3Df1_aW5kZXguaHRtbA%26_t%3D1737780840%26download%3D1%26cpath%3D%2Fcontrolpanel%2Ffilemanager%2F%26reqid%3D19547b381ed222&amp;app=opera.exe&amp;css=3&amp;js=1&amp;rel=1&amp;rji=1&amp;sbe=1"></script>
<script type="text/javascript" nonce="783214f0a87143339a8fc4ff1b0" src="//local.adguard.org?ts=1740664045248&amp;name=AdGuard%20Assistant&amp;name=AdGuard%20Extra&amp;name=AdGuard%20Popup%20Blocker&amp;type=user-script"></script><script type="text/javascript" nonce="ce7c29b52802474e85bb6cf8846" src="//local.adguard.org?ts=1737762676503&amp;type=content-script&amp;dmn=web.fc2.com&amp;url=https%3A%2F%2Fweb.fc2.com%2Fcontrolpanel%2Ffilemanager%2Fconnector%2F%3Fcmd%3Dfile%26target%3Df1_aW5kZXguaHRtbA%26_t%3D1733316600%26download%3D1%26cpath%3D%2Fcontrolpanel%2Ffilemanager%2F%26reqid%3D1949aeb045fc3&amp;app=opera.exe&amp;css=3&amp;js=1&amp;rel=1&amp;rji=1&amp;sbe=1"></script>
<script type="text/javascript" nonce="ce7c29b52802474e85bb6cf8846" src="//local.adguard.org?ts=1737762676503&amp;name=AdGuard%20Assistant&amp;name=AdGuard%20Extra&amp;name=AdGuard%20Popup%20Blocker&amp;type=user-script"></script><script type="text/javascript" nonce="2d572e6245384dc185f8b3f2735" src="//local.adguard.org?ts=1733307088011&amp;type=content-script&amp;dmn=web.fc2.com&amp;url=https%3A%2F%2Fweb.fc2.com%2Fcontrolpanel%2Ffilemanager%2Fconnector%2F%3Fcmd%3Dfile%26target%3Df1_aW5kZXguaHRtbA%26_t%3D1732892280%26download%3D1%26cpath%3D%2Fcontrolpanel%2Ffilemanager%2F%26reqid%3D1939142d28c3bb&amp;app=opera.exe&amp;css=3&amp;js=1&amp;rel=1&amp;rji=1&amp;sbe=1"></script>
<script type="text/javascript" nonce="2d572e6245384dc185f8b3f2735" src="//local.adguard.org?ts=1733307088011&amp;name=AdGuard%20Assistant&amp;name=AdGuard%20Extra&amp;name=AdGuard%20Popup%20Blocker&amp;type=user-script"></script><script type="text/javascript" nonce="2d572e6245384dc185f8b3f2735" src="//local.adguard.org?ts=1732891289523&amp;type=content-script&amp;dmn=web.fc2.com&amp;url=https%3A%2F%2Fweb.fc2.com%2Fcontrolpanel%2Ffilemanager%2Fconnector%2F%3Fcmd%3Dfile%26target%3Df1_aW5kZXguaHRtbA%26_t%3D1730699280%26download%3D1%26cpath%3D%2Fcontrolpanel%2Ffilemanager%2F%26reqid%3D1937866b01a3a4&amp;app=opera.exe&amp;css=3&amp;js=1&amp;rel=1&amp;rji=1&amp;sbe=1"></script>
<script type="text/javascript" nonce="2d572e6245384dc185f8b3f2735" src="//local.adguard.org?ts=1732891289523&amp;name=AdGuard%20Assistant&amp;name=AdGuard%20Extra&amp;name=AdGuard%20Popup%20Blocker&amp;type=user-script"></script><script type="text/javascript" nonce="2d572e6245384dc185f8b3f2735" src="//local.adguard.org?ts=1730692285373&amp;type=content-script&amp;dmn=web.fc2.com&amp;url=https%3A%2F%2Fweb.fc2.com%2Fcontrolpanel%2Ffilemanager%2Fconnector%2F%3Fcmd%3Dfile%26target%3Df1_aW5kZXguaHRtbA%26_t%3D1728886740%26download%3D1%26cpath%3D%2Fcontrolpanel%2Ffilemanager%2F%26reqid%3D192f591108b40&amp;app=opera.exe&amp;css=3&amp;js=1&amp;rel=1&amp;rji=1&amp;sbe=1"></script>
<script type="text/javascript" nonce="2d572e6245384dc185f8b3f2735" src="//local.adguard.org?ts=1730692285373&amp;name=AdGuard%20Assistant&amp;name=AdGuard%20Extra&amp;name=AdGuard%20Popup%20Blocker&amp;type=user-script"></script><script type="text/javascript" nonce="6193fc9986114ffb939d2561f8d" src="//local.adguard.org?ts=1727866223928&amp;type=content-script&amp;dmn=web.fc2.com&amp;url=https%3A%2F%2Fweb.fc2.com%2Fcontrolpanel%2Ffilemanager%2Fconnector%2F%3Fcmd%3Dfile%26target%3Df1_aW5kZXguaHRtbA%26_t%3D1727007900%26download%3D1%26cpath%3D%2Fcontrolpanel%2Ffilemanager%2F%26reqid%3D1924cf8e3f792&amp;app=opera.exe&amp;css=3&amp;js=1&amp;rel=1&amp;rji=1&amp;sbe=1"></script>
<script type="text/javascript" nonce="6193fc9986114ffb939d2561f8d" src="//local.adguard.org?ts=1727866223928&amp;name=AdGuard%20Assistant&amp;name=AdGuard%20Extra&amp;name=AdGuard%20Popup%20Blocker&amp;type=user-script"></script><script type="text/javascript" nonce="a292672eab4b4444baecc4f8176" src="//local.adguard.org?ts=1726987702973&amp;type=content-script&amp;dmn=web.fc2.com&amp;url=https%3A%2F%2Fweb.fc2.com%2Fcontrolpanel%2Ffilemanager%2Fconnector%2F%3Fcmd%3Dfile%26target%3Df1_aW5kZXguaHRtbA%26_t%3D1726273620%26download%3D1%26cpath%3D%2Fcontrolpanel%2Ffilemanager%2F%26reqid%3D19218d2ecc3295&amp;app=opera.exe&amp;css=3&amp;js=1&amp;rel=1&amp;rji=1&amp;sbe=1"></script>
<script type="text/javascript" nonce="a292672eab4b4444baecc4f8176" src="//local.adguard.org?ts=1726987702973&amp;name=AdGuard%20Assistant&amp;name=AdGuard%20Extra&amp;name=AdGuard%20Popup%20Blocker&amp;type=user-script"></script><script type="text/javascript" nonce="4ee0a70532da4f639a1ae5629dc" src="//local.adguard.org?ts=1726221164445&amp;type=content-script&amp;dmn=web.fc2.com&amp;url=https%3A%2F%2Fweb.fc2.com%2Fcontrolpanel%2Ffilemanager%2Fconnector%2F%3Fcmd%3Dfile%26target%3Df1_aW5kZXguaHRtbA%26_t%3D1725924540%26download%3D1%26cpath%3D%2Fcontrolpanel%2Ffilemanager%2F%26reqid%3D191eb5d797289&amp;app=opera.exe&amp;css=3&amp;js=1&amp;rel=1&amp;rji=1&amp;sbe=1"></script>
<script type="text/javascript" nonce="4ee0a70532da4f639a1ae5629dc" src="//local.adguard.org?ts=1726221164445&amp;name=AdGuard%20Assistant&amp;name=AdGuard%20Extra&amp;name=AdGuard%20Popup%20Blocker&amp;type=user-script"></script><script type="text/javascript" nonce="4ee0a70532da4f639a1ae5629dc" src="//local.adguard.org?ts=1725922367025&amp;type=content-script&amp;dmn=web.fc2.com&amp;url=https%3A%2F%2Fweb.fc2.com%2Fcontrolpanel%2Ffilemanager%2Fconnector%2F%3Fcmd%3Dfile%26target%3Df1_aW5kZXguaHRtbA%26_t%3D1725535920%26download%3D1%26cpath%3D%2Fcontrolpanel%2Ffilemanager%2F%26reqid%3D191d91a4cdf3ce&amp;app=opera.exe&amp;css=3&amp;js=1&amp;rel=1&amp;rji=1&amp;sbe=1"></script>
<script type="text/javascript" nonce="4ee0a70532da4f639a1ae5629dc" src="//local.adguard.org?ts=1725922367025&amp;name=AdGuard%20Assistant&amp;name=AdGuard%20Extra&amp;name=AdGuard%20Popup%20Blocker&amp;type=user-script"></script><script type="text/javascript" nonce="4ee0a70532da4f639a1ae5629dc" src="//local.adguard.org?ts=1725531767972&amp;type=content-script&amp;dmn=web.fc2.com&amp;url=https%3A%2F%2Fweb.fc2.com%2Fcontrolpanel%2Ffilemanager%2Fconnector%2F%3Fcmd%3Dfile%26target%3Df1_aW5kZXguaHRtbA%26_t%3D1725273000%26download%3D1%26cpath%3D%2Fcontrolpanel%2Ffilemanager%2F%26reqid%3D191c1ce96735f&amp;app=opera.exe&amp;css=3&amp;js=1&amp;rel=1&amp;rji=1&amp;sbe=1"></script>
<script type="text/javascript" nonce="4ee0a70532da4f639a1ae5629dc" src="//local.adguard.org?ts=1725531767972&amp;name=AdGuard%20Assistant&amp;name=AdGuard%20Extra&amp;name=AdGuard%20Popup%20Blocker&amp;type=user-script"></script><script type="text/javascript" nonce="4ee0a70532da4f639a1ae5629dc" src="//local.adguard.org?ts=1725265365988&amp;type=content-script&amp;dmn=web.fc2.com&amp;url=https%3A%2F%2Fweb.fc2.com%2Fcontrolpanel%2Ffilemanager%2Fconnector%2F%3Fcmd%3Dfile%26target%3Df1_aW5kZXguaHRtbA%26_t%3D1722506400%26download%3D1%26cpath%3D%2Fcontrolpanel%2Ffilemanager%2F%26reqid%3D191b244b6ba3ca&amp;app=opera.exe&amp;css=3&amp;js=1&amp;rel=1&amp;rji=1&amp;sbe=1"></script>
<script type="text/javascript" nonce="4ee0a70532da4f639a1ae5629dc" src="//local.adguard.org?ts=1725265365988&amp;name=AdGuard%20Assistant&amp;name=AdGuard%20Extra&amp;name=AdGuard%20Popup%20Blocker&amp;type=user-script"></script><link rel="icon" href="icon.ico">

<!--
更新方法

http://web.fc2.com/controlpanel/filemanager/#elf_f1_Lw
index.htmlをダウンロード
テキストエディタでソース更新を行う(ブラウザ上での更新はしない)
車番補足リストの修正
バージョンの変更
chromeで表示
動作確認
画面をキャプチャ
index.htmlを複製してファイル名を　ver.のYYYYMMDD.htmlに変更
2つのHTMLファイルをアップロード(ver.表記はoldフォルダへ)
@enodenwikiにキャプチャを添付して更新通知

文例

#江ノ電運用 （江ノ電の車両のシフト・時刻）を簡単に確認・報告できる #江ノ電運用報告文面作成ツール
http://enodenwiki.web.fc2.com/
●Fの
車体側面広告「●」の掲出に対応しました。
車体側面広告「●」の撤去に対応しました。
検車区入場に対応しました。
検車区出場に対応しました。
また、#江ノ電運用6連ガチャ の参照データを直近のものに更新しました。


const trains = [
{"num":"1001F","note":""},
{"num":"305F" ,"note":""},
{"num":"2002F","note":""},
{"num":"1002F","note":""},
{"num":"1501F","note":""},
{"num":"10F"  ,"note":""},
{"num":"2001F","note":""},
{"num":"1201F","note":""},
{"num":"21F"  ,"note":""},
{"num":"502F" ,"note":""},
{"num":"2003F","note":""},
{"num":"22F"  ,"note":""},
{"num":"501F" ,"note":""},
{"num":"1101F","note":""},
{"num":"1502F","note":""},
{"num":"不明" },
 -->


<!-- Global site tag (gtag.js) - Google Analytics -->


<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-130133387-1');
</script>

<style>
#loading {
  width: 100vw;
  height: 100vh;
  transition: all 0.5s;
  background-color: white;
  background-image: url('EERrun.gif');
  background-size: 100%;
  background-position: center center;
  background-repeat:no-repeat;
  position: fixed;
  top: 0;
  left: 0;
  z-index: 9999;
}
.loaded {
  opacity: 0;
  visibility: hidden;
}
/* ローディングアニメーション */
@keyframes sk-scaleout {
  0% {
    transform: scale(0);
  } 100% {
    transform: scale(1.0);
    opacity: 0;
  }
}

/* ボタンデザイン初期化 */
select{
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
}
select::-ms-expand {
    display: none;
}

input[type="submit"],
input[type="button"] {
  border-radius: 0;
  -webkit-box-sizing: content-box;
  -webkit-appearance: button;
  appearance: button;
  border: 1px solid #767676;
  box-sizing: border-box;
  cursor: pointer;
}
/*
select::-webkit-search-decoration,
input[type="submit"]::-webkit-search-decoration,
input[type="button"]::-webkit-search-decoration {
  display: none;
}
select::focus,
input[type="submit"]::focus,
input[type="button"]::focus {
  outline-offset: -2px;
}*/



body{
 width:99.5%;
 margin:8px;
 font-family:-apple-system, BlinkMacSystemFont, "Helvetica Neue", "Segoe UI", sans-serif;
 font-size:16px;
 }

#header{
  padding:0 8px;

}
#contents{
 margin:0;
 background-color:white;
}
#mdswitch,#service,#otherTrain,#footer{
  padding:0 8px;}
#footer{
line-height:1.7;
}
/* 固定行 */
.sticky{
  position: -webkit-sticky;
  position: sticky;
  top: 0;
  z-index:3;
  background-color:white;
  padding:0 8px;
  border-bottom:1px solid silver;
}

form{
 line-height:1.6;}

button, input, select, textarea{
 font-size:inherit;
 font-family:inherit;}
input[type=text]{ 
 width:4em;}
input#delay{
 width:2em;}
input[type=text]{
 background-color:#ffe;}
p{margin:0;}

select:disabled,input:disabled{
 background-color:silver;}
.s{
 font-size:small;}
.ss{
 font-size:x-small;}
#out{
 width:99%;
 max-width: 540px;
 height: 15em;}

[id^="row"]{
 margin-bottom:0.5em;
}

.reverse{
border: 1px solid #000;
font-size:small;
background-color:#eee;
}
.easy{
 display:inherit;
}

//初期非表示
.detail, .pan, .textbox, #depot{
 display:none;
}

#depot{
 background-color:#fffbe6;
 }
#depotTitle{
 color:white;
 background-color:forestgreen;
}

/* ボタン */
.button.reset{
background-color:#eee;
border:1px solid #000;
border-radius: 4px;
padding:0 3px;
}

.button{
background-color:#fff;
border:1px solid #000;
border-radius: 4px;
padding:0 3px;
}
.button img{
 transform: rotate(45deg);
 height:0.95em;
}
.button:hover,.button:active{
background-color:yellow;
}


/* ラジオボタン */
input[type=radio]{display:none;}
input[type="radio"]:checked + label {
 background-color: forestgreen;
 border:1px groove #000;
 transition: .3s;
 font-weight:bold;
 color: #fff;}

label.radio.left{
 color: #999;
 padding: 0 4px;
 border-radius: 5px 0 0 5px;
 border:1px dotted #999;
 font-weight:bold;
}
label.radio.right{
 color: #999;
 padding: 0 4px;
 border-radius: 0 5px 5px 0;
 border:1px dotted #999;
 font-weight:bold;
}
label.radio:hover,label.radio:active {
 color: #000;
 border:1px groove #000;
 background-color: yellow;
 font-weight:bold;
}

/* チェックボックス */
input[type=checkbox]{display:none;}
input[type="checkbox"]:checked + label {
 background-color: forestgreen;
 border:1px groove #000;
 transition: .3s;
 font-weight:bold;
 color: #fff;}

label.check.left{
 color: #999;
 padding: 0 4px;
 border-radius: 5px 0 0 5px;
 border:1px dotted #999;
 font-weight:bold;
}
label.check.center{
 color: #999;
 padding: 0 4px;
 border:1px dotted #999;
 font-weight:bold;
}

label.check.right{
 color: #999;
 padding: 0 4px;
 border-radius: 0 5px 5px 0;
 border:1px dotted #999;
 font-weight:bold;
}

label.check.fixed{
 color: #999;
 padding: 0 4px;
 border-radius: 5px 5px 5px 5px;
 border:1px dotted #999;
 font-weight:bold;
}

label.check.fixed:checked + label {
 background-color: rgb(255, 0, 0);
 border:1px groove #000;
 transition: .3s;
 font-weight:bold;
 color: #fff;}


label.check:hover,label.check:active {
 color: #000;
 border:1px groove #000;
 background-color: yellow;
 font-weight:bold;
}


/* セレクトボックス*/
select{
    margin-bottom: 6px;
    padding:0 26px 0 2px;
    font-size: 16px;
    border-radius: 4px;
    border: 1px solid #000;
    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAtklEQVQ4T62SsQ0CMQxF7c3slh5qJqCn4m4EOmaAHYg3M3KURMFHQqRcmpNy/t//OUaYPDiph30MiOiMiIcQwmkkETM/VfUtIg9k5ouq3k2IiK9/Jkl8TI2uSEQ3AFhy556JE5tkiTMYMfklFpG1DLFn0hJH7HpoRGQohhSP4dhXVTNzjG2dS42fujdx/7/EmwS52OOk+424aZAGW+OsIlJeqk7V3cSEozWzR95nlUfWt1UzneADge1aiLqYT+oAAAAASUVORK5CYII=);
    background-repeat: no-repeat;
    background-size: 12px 10px;
    background-position: right 10px center;
    background-color:white;
}



/* ツイートボタン */
.tw{
  margin-left:0.5em;
  padding:1px 6px;
  font-weight:bold;
  color: #fff;
  background-color: #000000;
  border-radius: 1em;
  display:inline;}

/* マシュマロ */
.mashmallow{
  margin-left:0.5em;
  padding:1px 6px;
  font-weight:bold;
  color: #fff;
  background-color: #f3969a;
  
  border-radius: 1em;}
/* コピーボタン */
.copy{
  margin-left:0.5em;
  padding:0 6px;
  font-weight:bold;
  color: #fff;
  background-color: forestgreen;
  border-radius: 1em;}

.tw:hover,.copy:hover,.mashmallow:hover {
  text-decoration:underline;}

/* ブックマーク用タブを開く */
.bookmark{
  margin-left:0.5em;
  padding:0 6px;
  font-weight:bold;
  color: #fff;
  background-color:#ff8400;
  border-radius: 1em;}

/* 上部出現メッセージ */
#msg{
 position:fixed;
 top:-4em;
 left:0;
 margin:0;
 padding:15px;
 width:100%;
 background-color:forestgreen;
 color:white;
 font-weight:bold;
 z-index:5;
}

@keyframes fadeOut {
    5%, 90% {
  top:0;
    }
    to,from {
  top:-4em;
    }
}
/* 運用番号の色 */
span.b0{
 color:silver}
span.b1{
 background-color:orange;}
span.b2{
 background-color:green;
 color:white;}
span.b3{
 background-color:red;
 color:white;}
span.b4{
 background-color:purple;
 color:white;}
span.b5{
 background-color:pink;}
span.b6{
 background-color:skyblue;}

span.u0{
 color:silver}
span.u1{
 border-bottom:dotted 2px orange;}
span.u2{
 border-bottom:dotted 2px green;}
span.u3{
 border-bottom:dotted 2px red;}
span.u4{
 border-bottom:dotted 2px purple;}
span.u5{
 border-bottom:dotted 2px pink;}
span.u6{
 border-bottom:dotted 2px skyblue;}

/* レア度修飾 */
span.rareN{color:silver;}
span.rareR{color:#000;}
span.rareSR{color:#000;background-color:yellowgreen;}
span.rareSSR{font-weight:bold;color:#fff;background-color:red;}

@media screen and (min-width: 480px) {
  .sp{
    display: none;
  }
}

</style>

<script><!--





















-->
/* 編集項目ここから */

//選択肢リスト(検査時は表記を"検 車番F"とし、リストの末尾に持っていく)
//number：編成名、note：補足項目
//noteは内容が無しの場合は空欄「""」or項目自体無しのどちらでもよい。
//ここの順番はプルダウンの順番になる
const trains = [
{"num":"1001F","note":"ぱいのこ","safety":false},
{"num":"305F" ,"note":"","safety":false},
{"num":"2002F","note":"","safety":false},
{"num":"1002F","note":"嵐電","safety":false},
{"num":"1501F","note":"","safety":false},
{"num":"10F"  ,"note":"","safety":false},
{"num":"2001F","note":"","safety":false},
{"num":"1201F","note":"","safety":false},
{"num":"21F"  ,"note":"","safety":false},
{"num":"502F" ,"note":"ポジカ","safety":true},
{"num":"2003F","note":"","safety":false},
{"num":"22F"  ,"note":"コカコーラ","safety":false},
{"num":"501F" ,"note":"みかん/ポジカ","safety":true},
{"num":"1101F","note":"","safety":false},
{"num":"1502F","note":"","safety":true},
{"num":"不明" },
];

for(i in trains){
if(trains[i].num=="不明"){color="black";bg="silver";}
else if(i%2==0){trains[i].color="black";trains[i].bg="#fff4d4";}
else{trains[i].color="white";trains[i].bg="#007f2d";}
}


//ツイート完了後に表示するtwitterID(@は不要)
const account="enoden_unyo";

//祝日リスト yyyy-mm-dd
//https://www8.cao.go.jp/chosei/shukujitsu/gaiyou.html
//このほかに土休日ダイヤとなる日がある場合は要追記（年末年始）
const holiday=[
"2024-01-01",//元日"
"2024-01-02",//年末年始休日ダイヤ"
"2024-01-03",//年末年始休日ダイヤ"
"2024-01-08",//成人の日"
"2024-02-11",//建国記念の日"
"2024-02-12",//休日"
"2024-02-23",//天皇誕生日"
"2024-03-20",//春分の日"
"2024-04-29",//昭和の日"
"2024-05-03",//憲法記念日"
"2024-05-04",//みどりの日"
"2024-05-05",//こどもの日"
"2024-05-06",//休日"
"2024-07-15",//海の日"
"2024-08-11",//山の日"
"2024-08-12",//休日"
"2024-09-16",//敬老の日"
"2024-09-22",//秋分の日"
"2024-09-23",//休日"
"2024-10-14",//スポーツの日"
"2024-11-03",//文化の日"
"2024-11-04",//休日"
"2024-11-23",//勤労感謝の日"
"2024-12-30",//年末年始休日ダイヤ"
"2024-12-31",//年末年始休日ダイヤ"
"2025-01-01",//元日"
"2025-01-02",//年末年始休日ダイヤ"
"2025-01-03",//年末年始休日ダイヤ"
"2025-01-13",//成人の日"
"2025-02-11",//建国記念の日"
"2025-02-23",//天皇誕生日"
"2025-02-24",//休日"
"2025-03-20",//春分の日"
"2025-04-29",//昭和の日"
"2025-05-03",//憲法記念日"
"2025-05-04",//みどりの日"
"2025-05-05",//こどもの日"
"2025-05-06",//休日"
"2025-07-21",//海の日"
"2025-08-11",//山の日"
"2025-09-15",//敬老の日"
"2025-09-23",//秋分の日"
"2025-10-13",//スポーツの日"
"2025-11-03",//文化の日"
"2025-11-23",//勤労感謝の日"
"2025-11-24",//休日"
"2025-12-30",//年末年始休日ダイヤ"
"2025-12-31",//年末年始休日ダイヤ"
"2026-01-02",//年末年始休日ダイヤ"
"2026-01-03",//年末年始休日ダイヤ"
"2026-01-01",//元日"
"2026-01-12",//成人の日"
"2026-02-11",//建国記念の日"
"2026-02-23",//天皇誕生日"
"2026-03-20",//春分の日"
"2026-04-29",//昭和の日"
"2026-05-03",//憲法記念日"
"2026-05-04",//みどりの日"
"2026-05-05",//こどもの日"
"2026-05-06",//休日"
"2026-07-20",//海の日"
"2026-08-11",//山の日"
"2026-09-21",//敬老の日"
"2026-09-22",//休日"
"2026-09-23",//秋分の日"
"2026-10-12",//スポーツの日"
"2026-11-03",//文化の日"
"2026-11-23",//勤労感謝の日"
];

//レア度算出用データ 同編成同士の部分は単行の出現回数
//藤沢方編成名:[(鎌倉方編成の出現回数)305F,1001F,1002F,1101F,1201F,1501F,1502F,2001F,2002F,2003F,10F,21F,22F,501F,502F],
const rareData={
"305F"	:[	0.00370988684845112,	0.0345019476905954,	0.000556483027267668,	0.00333889816360601,	0.00204043776664812,	0.00129846039695789,	0,	0.00111296605453534,	0.0109441662029308,	0.00575032461509924,	0.00278241513633834,	0.000556483027267668,	0.00222593210907067,	0,	0,	0,	0,	0,	0,	0,	0],
"1001F"	:[	0.038026340196624,	0.00370988684845112,	0.00111296605453534,	0.00278241513633834,	0.000556483027267668,	0.00148395473938045,	0,	0.00278241513633834,	0.0166944908180301,	0.00352439250602857,	0.00575032461509924,	0.00148395473938045,	0.00129846039695789,	0,	0,	0,	0,	0,	0,	0,	0],
"1002F"	:[	0.00166944908180301,	0.00241142645149323,	0.00704878501205713,	0.000741977369690224,	0.000741977369690224,	0.0408087553329624,	0,	0.00129846039695789,	0.0120571322574661,	0.0059358189575218,	0.00111296605453534,	0.00259692079391579,	0.00185494342422556,	0,	0,	0,	0,	0,	0,	0,	0],
"1101F"	:[	0.00241142645149323,	0.00148395473938045,	0.000927471712112781,	0.00315340382118345,	0.00204043776664812,	0.00222593210907067,	0,	0.00519384158783157,	0.00315340382118345,	0.00278241513633834,	0.0176219625301428,	0.000741977369690224,	0.000927471712112781,	0,	0,	0,	0,	0,	0,	0,	0],
"1201F"	:[	0.00278241513633834,	0.00389538119087368,	0.00111296605453534,	0.00111296605453534,	0.00315340382118345,	0.00111296605453534,	0,	0.0391393062511593,	0.00779076238174736,	0.0109441662029308,	0.00129846039695789,	0.00185494342422556,	0.00129846039695789,	0,	0,	0,	0,	0,	0,	0,	0],
"1501F"	:[	0.00983120014839548,	0.00853273975143758,	0.00871823409386014,	0.00556483027267668,	0.00259692079391579,	0.0140975700241143,	0,	0.0274531626785383,	0.0115006492301985,	0.0185494342422556,	0.00983120014839548,	0.0076052680393248,	0.00389538119087368,	0,	0,	0,	0,	0,	0,	0,	0],
"1502F"	:[	0,	0,	0,	0,	0,	0,	0.00426636987571879,	0,	0,	0,	0,	0,	0,	0.00871823409386014,	0.00649230198478946,	0,	0,	0,	0,	0,	0],
"2001F"	:[	0.00352439250602857,	0.00575032461509924,	0.00222593210907067,	0.00185494342422556,	0.0421072157299202,	0.00204043776664812,	0,	0.00259692079391579,	0.00704878501205713,	0.0102021888332406,	0.00204043776664812,	0.00185494342422556,	0.00315340382118345,	0,	0,	0,	0,	0,	0,	0,	0],
"2002F"	:[	0.0127991096271564,	0.0126136152847338,	0.00556483027267668,	0.0029679094787609,	0.00482285290298646,	0.00630680764236691,	0,	0.0029679094787609,	0.00983120014839548,	0.00667779632721202,	0.00370988684845112,	0.00575032461509924,	0.00445186421814135,	0,	0,	0,	0,	0,	0,	0,	0],
"2003F"	:[	0.00630680764236691,	0.00426636987571879,	0.00723427935447969,	0.00241142645149323,	0.0131700983120015,	0.00278241513633834,	0,	0.0102021888332406,	0.00686329066963458,	0.00575032461509924,	0.00612131329994435,	0.00259692079391579,	0.0076052680393248,	0,	0,	0,	0,	0,	0,	0,	0],
"10F"	:[	0.00408087553329624,	0.00241142645149323,	0.00222593210907067,	0.0146540530513819,	0.00204043776664812,	0.00315340382118345,	0,	0.00352439250602857,	0.00426636987571879,	0.00964570580597292,	0.00575032461509924,	0.0144685587089594,	0.00370988684845112,	0,	0,	0,	0,	0,	0,	0,	0],
"21F"	:[	0.00204043776664812,	0.00111296605453534,	0.00204043776664812,	0.000556483027267668,	0.000556483027267668,	0.00111296605453534,	0,	0.00166944908180301,	0.00389538119087368,	0.00241142645149323,	0.0103876831756631,	0.00370988684845112,	0.0248562418846225,	0,	0,	0,	0,	0,	0,	0,	0],
"22F"	:[	0.000556483027267668,	0.00148395473938045,	0.00185494342422556,	0.000741977369690224,	0.000556483027267668,	0.00315340382118345,	0,	0.000927471712112781,	0.00519384158783157,	0.0115006492301985,	0.00408087553329624,	0.0272676683361157,	0.00482285290298646,	0,	0,	0,	0,	0,	0,	0,	0],
"501F"	:[	0,	0,	0,	0,	0,	0,	0.00890372843628269,	0,	0,	0,	0,	0,	0,	0.0046373585605639,	0.0250417362270451,	0,	0,	0,	0,	0,	0],
"502F"	:[	0,	0,	0,	0,	0,	0,	0.00556483027267668,	0,	0,	0,	0,	0,	0,	0.033017992951215,	0.00612131329994435,	0,	0,	0,	0,	0,	0],
"701F"	:[	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],
"702F"	:[	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],
"703F"	:[	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],
"704F"	:[	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],
"705F"	:[	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],
"706F"	:[	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],
};


//時刻表データ 列車番号,運用番号,hmm(x16),行先(途中駅止めのみ),朝夜判定
//下り（藤沢→鎌倉）
const ttOut=[
[ 81,3,null,null,null,null,null, 510, 512, 514, 515, 517, 522, 524, 526, 528, 529, 530,,],
[ 83,2,null,null,null,null,null, 523, 525, 527, 528, 530, 536, 539, 541, 543, 544, 545,,],
[201,4, 536, 537, 539, 541, 544, 549, 551, 553, 554, 556, 603, 606, 609, 610, 612, 613,,],
[203,5, 550, 551, 553, 555, 558, 603, 605, 607, 608, 610, 617, 620, 623, 624, 626, 627,,],
[205,6, 604, 605, 607, 609, 612, 617, 619, 621, 622, 624, 631, 634, 637, 638, 640, 641,,],
[207,1, 618, 619, 621, 623, 626, 631, 633, 635, 636, 638, 645,null,null,null,null,null,,],
[207,1,null,null,null,null,null,null,null,null,null,null,null, 648, 651, 652, 654, 655,,],
[209,2, 632, 633, 635, 637, 640, 645, 647, 649, 650, 652, 659, 702, 705, 706, 708, 709,,],
[211,3, 646, 647, 649, 651, 654, 659, 701, 703, 704, 706, 713, 716, 719, 720, 722, 723,,],
[213,4, 700, 701, 703, 705, 708, 713, 715, 717, 718, 720, 727, 730, 733, 734, 736, 737,,],
[215,5, 714, 715, 717, 719, 722, 727, 729, 731, 732, 734, 741,null,null,null,null,null,,],
[215,5,null,null,null,null,null,null,null,null,null,null,null, 744, 747, 748, 750, 751,,],
[217,6, 728, 729, 731, 733, 736, 741, 743, 745, 746, 748, 755, 758, 801, 802, 804, 805,,],
[219,1, 742, 743, 745, 747, 750, 755, 757, 759, 805, 802, 809, 812, 815, 816, 818, 819,,],
[221,2, 756, 757, 759, 801, 804, 809, 811, 813, 814, 816, 823, 826, 829, 830, 832, 833,,],
[223,3, 810, 811, 813, 815, 818, 823, 825, 827, 828, 830, 837, 840, 843, 844, 846, 847,,],
[225,4, 824, 825, 827, 829, 832, 837, 839, 841, 842, 844, 851, 854, 857, 858, 900, 901,,],
[227,5, 838, 839, 841, 843, 846, 851, 853, 855, 856, 858, 905, 908, 911, 912, 914, 915,,],
[229,6, 852, 853, 855, 857, 900, 905, 907, 909, 910, 912, 919, 922, 925, 926, 928, 929,,],
[231,1, 906, 907, 909, 911, 914, 919, 921, 923, 924, 926, 933, 936, 939, 940, 942, 943,,],
[233,2, 920, 921, 923, 925, 928, 933, 935, 937, 938, 940, 947, 950, 953, 954, 956, 957,,],
[235,3, 934, 935, 937, 939, 942, 947, 949, 951, 952, 954,1001,1004,1007,1008,1010,1011,,],
[237,4, 948, 949, 951, 953, 956,1001,1003,1005,1006,1008,1015,1018,1021,1022,1024,1025,,],
[239,5,1002,1003,1005,1007,1010,1015,1017,1019,1020,1022,1029,1032,1035,1036,1038,1039,,],
[241,6,1016,1017,1019,1021,1024,1029,1031,1033,1034,1036,1043,1046,1049,1050,1052,1053,,],
[243,1,1030,1031,1033,1035,1038,1043,1045,1047,1048,1050,1057,1100,1103,1104,1106,1107,,],
[245,2,1044,1045,1047,1049,1052,1057,1059,1101,1102,1104,1111,1114,1117,1118,1120,1121,,],
[247,3,1058,1059,1101,1103,1106,1111,1113,1115,1116,1118,1125,1128,1131,1132,1134,1135,,],
[249,4,1112,1113,1115,1117,1120,1125,1127,1129,1130,1132,1139,1142,1145,1146,1148,1149,,],
[251,5,1126,1127,1129,1131,1134,1139,1141,1143,1144,1146,1153,1156,1159,1200,1202,1203,,],
[253,6,1140,1141,1143,1145,1148,1153,1155,1157,1158,1200,1207,1210,1213,1214,1216,1217,,],
[255,1,1154,1155,1157,1159,1202,1207,1209,1211,1212,1214,1221,1224,1227,1228,1230,1231,,],
[257,2,1208,1209,1211,1213,1216,1221,1223,1225,1226,1228,1235,1238,1241,1242,1244,1245,,],
[259,3,1222,1223,1225,1227,1230,1235,1237,1239,1240,1242,1249,1252,1255,1256,1258,1259,,],
[261,4,1236,1237,1239,1241,1244,1249,1251,1253,1254,1256,1303,1306,1309,1310,1312,1313,,],
[263,5,1250,1251,1253,1255,1258,1303,1305,1307,1308,1310,1317,1320,1323,1324,1326,1327,,],
[265,6,1304,1305,1307,1309,1312,1317,1319,1321,1322,1324,1331,1334,1337,1338,1340,1341,,],
[267,1,1318,1319,1321,1323,1326,1331,1333,1335,1336,1338,1345,1348,1351,1352,1354,1355,,],
[269,2,1332,1333,1335,1337,1340,1345,1347,1349,1350,1352,1359,1402,1405,1406,1408,1409,,],
[271,3,1346,1347,1349,1351,1354,1359,1401,1403,1404,1406,1413,1416,1419,1420,1422,1423,,],
[273,4,1400,1401,1403,1405,1408,1413,1415,1417,1418,1420,1427,1430,1433,1434,1436,1437,,],
[275,5,1414,1415,1417,1419,1422,1427,1429,1431,1432,1434,1441,1444,1447,1448,1450,1451,,],
[277,6,1428,1429,1431,1433,1436,1441,1443,1445,1446,1448,1455,1458,1501,1502,1504,1505,,],
[279,1,1442,1443,1445,1447,1450,1455,1457,1459,1505,1502,1509,1512,1515,1516,1518,1519,,],
[281,2,1456,1457,1459,1501,1504,1509,1511,1513,1514,1516,1523,1526,1529,1530,1532,1533,,],
[283,3,1510,1511,1513,1515,1518,1523,1525,1527,1528,1530,1537,1540,1543,1544,1546,1547,,],
[285,4,1524,1525,1527,1529,1532,1537,1539,1541,1542,1544,1551,1554,1557,1558,1600,1601,,],
[287,5,1538,1539,1541,1543,1546,1551,1553,1555,1556,1558,1605,1608,1611,1612,1614,1615,,],
[289,6,1552,1553,1555,1557,1600,1605,1607,1609,1610,1612,1619,1622,1625,1626,1628,1629,,],
[291,1,1606,1607,1609,1611,1614,1619,1621,1623,1624,1626,1633,1636,1639,1640,1642,1643,,],
[293,2,1620,1621,1623,1625,1628,1633,1635,1637,1638,1640,1647,1650,1653,1654,1656,1657,,],
[295,3,1634,1635,1637,1639,1642,1647,1649,1651,1652,1654,1701,1704,1707,1708,1710,1711,,],
[297,4,1648,1649,1651,1653,1656,1701,1703,1705,1706,1708,1715,1718,1721,1722,1724,1725,,],
[299,5,1702,1703,1705,1707,1710,1715,1717,1719,1720,1722,1729,1732,1735,1736,1738,1739,,],
[301,6,1716,1717,1719,1721,1724,1729,1731,1733,1734,1736,1743,1746,1749,1750,1752,1753,,],
[303,1,1730,1731,1733,1735,1738,1743,1745,1747,1748,1750,1757,1800,1803,1804,1806,1807,,],
[305,2,1744,1745,1747,1749,1752,1757,1759,1801,1802,1804,1811,null,null,null,null,null,,],
[305,2,null,null,null,null,null,null,null,null,null,null,null,1814,1817,1818,1820,1821,,"夜"],
[307,3,1758,1759,1801,1803,1806,1811,1813,1815,1816,1818,1825,1828,1831,1832,1834,1835,,"夜"],
[309,4,1812,1813,1815,1817,1820,1825,1827,1829,1830,1832,1839,1842,1845,1846,1848,1849,,"夜"],
[311,5,1826,1827,1829,1831,1834,1839,1841,1843,1844,1846,1853,1856,1859,1900,1902,1903,,"夜"],
[313,6,1840,1841,1843,1845,1848,1853,1855,1857,1858,1900,1907,1910,1913,1914,1916,1917,,"夜"],
[315,1,1854,1855,1857,1859,1902,1907,1909,1911,1912,1914,1921,1924,1927,1928,1930,1931,,"夜"],
[317,2,1908,1909,1911,1913,1916,1921,1923,1925,1926,1928,1935,1938,1941,1942,1944,1945,,"夜"],
[319,3,1922,1923,1925,1927,1930,1935,1937,1939,1940,1942,1949,1952,1955,1956,1958,1959,,"夜"],
[321,4,1936,1937,1939,1941,1944,1949,1951,1953,1954,1956,2003,2006,2009,2010,2012,2013,,"夜"],
[323,5,1950,1951,1953,1955,1958,2003,2005,2007,2008,2010,2017,2020,2023,2024,2026,2027,,"夜"],
[325,6,2004,2005,2007,2009,2012,2017,2019,2021,2022,2024,2031,2034,2037,2038,2040,2041,,"夜"],
[327,1,2018,2019,2021,2023,2026,2031,2033,2035,2036,2038,2045,2048,2051,2052,2054,2055,,"夜"],
[329,2,2032,2033,2035,2037,2040,2045,2047,2049,2050,2052,2059,2102,2105,2106,2108,2109,,"夜"],
[331,3,2046,2047,2049,2051,2054,2059,2101,2103,2104,2106,2113,2116,2119,2120,2122,2123,,"夜"],
[333,4,2100,2101,2103,2105,2108,2113,2115,2117,2118,2120,2127,2130,2132,2134,2135,2136,,"夜"],
[ 71,5,2114,2115,2117,2119,2122,2127,2129,2131,2132,2134,2139,2141,null,null,null,null,"極楽寺","夜"],
[335,6,2128,2129,2131,2133,2136,2141,2143,2145,2146,2148,2155,2158,2200,2202,2203,2204,,"夜"],
[337,1,2142,2143,2145,2147,2150,2155,2157,2159,2205,2202,2209,2212,2215,2216,2218,2219,,"夜"],
[339,2,2156,2157,2159,2201,2204,2209,2211,2213,2214,2216,2223,2226,2229,2230,2232,2233,,"夜"],
[341,3,2210,2211,2213,2215,2218,2223,2225,2227,2228,2230,2238,2240,2244,2245,2247,2248,,"夜"],
[343,4,2224,2225,2227,2229,2232,2235,2238,2240,2241,2243,2250,2252,2255,2256,2258,2259,,"夜"],
[345,6,2250,2251,2253,2255,2258,2303,2305,2307,2308,2310,2316,2319,2322,2323,2325,2326,,"夜"],
[ 73,2,2316,2317,2319,2321,2324,2327,2330,2332,2333,2335,2339,2341,null,null,null,null,"極楽寺","夜"],
[ 11,4,2342,2343,2345,2347,2350,2352,null,null,null,null,null,null,null,null,null,null,"江ノ島","夜"],
];

//時刻表上り（鎌倉→藤沢）
const ttIn=[
[ 10,4,null,null,null,null,null,null,null,null,null,null, 515, 516, 519, 521, 522, 523,,],
[ 12,5,null,null,null,null,null,null,null,null,null,null, 536, 537, 541, 542, 544, 545,,],
[200,6, 520, 521, 523, 527, 529, 536, 539, 541, 542, 544, 550, 551, 555, 556, 558, 559,,],
[ 70,1,null,null,null,null, 546, 549, 552, 555, 556, 558, 604, 605, 609, 610, 612, 613,,],
[202,2, 550, 551, 553, 555,null,null,null,null,null,null,null,null,null,null,null,null,,],
[202,2,null,null,null,null, 557, 603, 606, 609, 610, 612, 618, 619, 623, 624, 626, 627,,],
[204,3, 604, 605, 607, 609, 611, 617, 620, 623, 624, 626, 632, 633, 637, 638, 640, 641,,],
[206,4, 618, 619, 621, 623, 625, 631, 634, 637, 638, 640, 646, 647, 651, 652, 654, 655,,],
[208,5, 632, 633, 635, 637, 639, 645, 648, 651, 652, 654, 700, 701, 705, 706, 708, 709,,],
[210,6, 646, 647, 649, 651, 653, 659, 702, 705, 706, 708, 714, 715, 719, 720, 722, 723,,],
[212,1, 700, 701, 703, 705, 707, 713, 716, 719, 720, 722, 728, 729, 733, 734, 736, 737,,],
[214,2, 714, 715, 717, 719,null,null,null,null,null,null,null,null,null,null,null,null,,],
[214,2,null,null,null,null, 721, 727, 730, 733, 734, 736, 742, 743, 747, 748, 750, 751,,],
[216,3, 728, 729, 731, 733, 735, 741, 744, 747, 748, 750, 756, 757, 801, 802, 804, 805,,],
[218,4, 742, 743, 745, 747, 749, 755, 758, 801, 802, 804, 810, 811, 815, 816, 818, 819,,],
[220,5, 756, 757, 759, 801, 803, 809, 812, 815, 816, 818, 824, 825, 829, 830, 832, 833,,],
[222,6, 810, 811, 813, 815, 817, 823, 826, 829, 830, 832, 838, 839, 843, 844, 846, 847,,],
[224,1, 824, 825, 827, 829, 831, 837, 840, 843, 844, 846, 852, 853, 857, 858, 900, 901,,],
[226,2, 838, 839, 841, 843, 845, 851, 854, 857, 858, 900, 906, 907, 911, 912, 914, 915,,],
[228,3, 852, 853, 855, 857, 859, 905, 908, 911, 912, 914, 920, 921, 925, 926, 928, 929,,],
[230,4, 906, 907, 909, 911, 913, 919, 922, 925, 926, 928, 934, 935, 939, 940, 942, 943,,],
[232,5, 920, 921, 923, 925, 927, 933, 936, 939, 940, 942, 948, 949, 953, 954, 956, 957,,],
[234,6, 934, 935, 937, 939, 941, 947, 950, 953, 954, 956,1002,1003,1007,1008,1010,1011,,],
[236,1, 948, 949, 951, 953, 955,1001,1004,1007,1008,1010,1016,1017,1021,1022,1024,1025,,],
[238,2,1002,1003,1005,1007,1009,1015,1018,1021,1022,1024,1030,1031,1035,1036,1038,1039,,],
[240,3,1016,1017,1019,1021,1023,1029,1032,1035,1036,1038,1044,1045,1049,1050,1052,1053,,],
[242,4,1030,1031,1033,1035,1037,1043,1046,1049,1050,1052,1058,1059,1103,1104,1106,1107,,],
[244,5,1044,1045,1047,1049,1051,1057,1100,1103,1104,1106,1112,1113,1117,1118,1120,1121,,],
[246,6,1058,1059,1101,1103,1105,1111,1114,1117,1118,1120,1126,1127,1131,1132,1134,1135,,],
[248,1,1112,1113,1115,1117,1119,1125,1128,1131,1132,1134,1140,1141,1145,1146,1148,1149,,],
[250,2,1126,1127,1129,1131,1133,1139,1142,1145,1146,1148,1154,1155,1159,1200,1202,1203,,],
[252,3,1140,1141,1143,1145,1147,1153,1156,1159,1200,1202,1208,1209,1213,1214,1216,1217,,],
[254,4,1154,1155,1157,1159,1201,1207,1210,1213,1214,1216,1222,1223,1227,1228,1230,1231,,],
[256,5,1208,1209,1211,1213,1215,1221,1224,1227,1228,1230,1236,1237,1241,1242,1244,1245,,],
[258,6,1222,1223,1225,1227,1229,1235,1238,1241,1242,1244,1250,1251,1255,1256,1258,1259,,],
[260,1,1236,1237,1239,1241,1243,1249,1252,1255,1256,1258,1304,1305,1309,1310,1312,1313,,],
[262,2,1250,1251,1253,1255,1257,1303,1306,1309,1310,1312,1318,1319,1323,1324,1326,1327,,],
[264,3,1304,1305,1307,1309,1311,1317,1320,1323,1324,1326,1332,1333,1337,1338,1340,1341,,],
[266,4,1318,1319,1321,1323,1325,1331,1334,1337,1338,1340,1346,1347,1351,1352,1354,1355,,],
[268,5,1332,1333,1335,1337,1339,1345,1348,1351,1352,1354,1400,1401,1405,1406,1408,1409,,],
[270,6,1346,1347,1349,1351,1353,1359,1402,1405,1406,1408,1414,1415,1419,1420,1422,1423,,],
[272,1,1400,1401,1403,1405,1407,1413,1416,1419,1420,1422,1428,1429,1433,1434,1436,1437,,],
[274,2,1414,1415,1417,1419,1421,1427,1430,1433,1434,1436,1442,1443,1447,1448,1450,1451,,],
[276,3,1428,1429,1431,1433,1435,1441,1444,1447,1448,1450,1456,1457,1501,1502,1504,1505,,],
[278,4,1442,1443,1445,1447,1449,1455,1458,1501,1502,1504,1510,1511,1515,1516,1518,1519,,],
[280,5,1456,1457,1459,1501,1503,1509,1512,1515,1516,1518,1524,1525,1529,1530,1532,1533,,],
[282,6,1510,1511,1513,1515,1517,1523,1526,1529,1530,1532,1538,1539,1543,1544,1546,1547,,],
[284,1,1524,1525,1527,1529,1531,1537,1540,1543,1544,1546,1552,1553,1557,1558,1600,1601,,],
[286,2,1538,1539,1541,1543,1545,1551,1554,1557,1558,1600,1606,1607,1611,1612,1614,1615,,],
[288,3,1552,1553,1555,1557,1559,1605,1608,1611,1612,1614,1620,1621,1625,1626,1628,1629,,],
[290,4,1606,1607,1609,1611,1613,1619,1622,1625,1626,1628,1634,1635,1639,1640,1642,1643,,],
[292,5,1620,1621,1623,1625,1627,1633,1636,1639,1640,1642,1648,1649,1653,1654,1656,1657,,],
[294,6,1634,1635,1637,1639,1641,1647,1650,1653,1654,1656,1702,1703,1707,1708,1710,1711,,],
[296,1,1648,1649,1651,1653,1655,1701,1704,1707,1708,1710,1716,1717,1721,1722,1724,1725,,],
[298,2,1702,1703,1705,1707,1709,1715,1718,1721,1722,1724,1730,1731,1735,1736,1738,1739,,],
[300,3,1716,1717,1719,1721,1723,1729,1732,1735,1736,1738,1744,1745,1749,1750,1752,1753,,],
[302,4,1730,1731,1733,1735,1737,1743,1746,1749,1750,1752,1758,1759,1803,1804,1806,1807,,],
[304,5,1744,1745,1747,1749,1751,1757,1800,1803,1804,1806,1812,1813,1817,1818,1820,1821,,],
[306,6,1758,1759,1801,1803,1805,1811,1814,1817,1818,1820,1826,1827,1831,1832,1834,1835,,],
[308,1,1812,1813,1815,1817,1819,1825,1828,1831,1832,1834,1840,1841,1845,1846,1848,1849,,],
[310,2,1826,1827,1829,1831,1833,1839,1842,1845,1846,1848,1854,1855,1859,1900,1902,1903,,"夜"],
[312,3,1840,1841,1843,1845,1847,1853,1856,1859,1900,1902,1908,1909,1913,1914,1916,1917,,"夜"],
[314,4,1854,1855,1857,1859,1901,1907,1910,1913,1914,1916,1922,1923,1927,1928,1930,1931,,"夜"],
[316,5,1908,1909,1911,1913,1915,1921,1924,1927,1928,1930,1936,1937,1941,1942,1944,1945,,"夜"],
[318,6,1922,1923,1925,1927,1929,1935,1938,1941,1942,1944,1950,1951,1955,1956,1958,1959,,"夜"],
[320,1,1936,1937,1939,1941,1943,1949,1952,1955,1956,1958,2004,2005,2009,2010,2012,2013,,"夜"],
[322,2,1950,1951,1953,1955,1957,2003,2006,2009,2010,2012,2018,2019,2023,2024,2026,2027,,"夜"],
[324,3,2004,2005,2007,2009,2011,2017,2020,2023,2024,2026,2032,2033,2037,2038,2040,2041,,"夜"],
[326,4,2018,2019,2021,2023,2025,2031,2034,2037,2038,2040,2046,2047,2051,2052,2054,2055,,"夜"],
[328,5,2032,2033,2035,2037,2039,2045,2048,2051,2052,2054,2100,2101,2105,2106,2108,2109,,"夜"],
[330,6,2046,2047,2049,2051,2053,2059,2102,2105,2106,2108,2114,2115,2119,2120,2122,2123,,"夜"],
[332,1,2100,2101,2103,2105,2107,2113,2116,2119,2120,2122,2128,2129,2133,2134,2136,2137,,"夜"],
[334,2,2114,2115,2117,2119,2121,2127,2130,2133,2134,2136,2142,2143,2147,2148,2150,2151,,"夜"],
[336,3,2128,2129,2131,2133,2135,2141,2144,2147,2148,2150,2156,2157,2201,2202,2204,2205,,"夜"],
[338,4,2142,2143,2145,2147,2149,2155,2158,2201,2202,2204,2210,2211,2215,2216,2218,2219,,"夜"],
[340,6,2210,2211,2213,2215,2217,2223,2226,2229,2230,2232,2236,2237,2241,2242,2244,2245,,"夜"],
[ 80,1,2224,2225,2227,2229,2231,2235,2239,2241,2242,2245,2247,null,null,null,null,null,"江ノ島","夜"],
[342,2,2239,2240,2242,2244,2246,2250,2254,2255,2257,2259,2302,2304,2307,2309,2310,2312,,"夜"],
[344,4,2305,2306,2308,2310,2312,2316,2319,2321,2322,2324,2328,2330,2333,2335,2336,2337,,"夜"],
[ 82,6,2337,2339,2340,2343,2345,2349,2352,2354,2355,2357,2400,null,null,null,null,null,"江ノ島","夜"],
];


/* 編集項目ここまで*/

</script>
</head>
<body onotouchstart="">
<div id="loading"></div>

<div id="header">
江ノ電運用報告文面作成ツール<!--





















-->
<span class="s">ver.20250915
(
20250914
)
<br>

江ノ電の車両運用（＝シフト）を確認、報告するための文面を簡単に作成するツールです。<b><a href="https://www.amazon.jp/hz/wishlist/ls/3TTKEWQ3AYG4Y?ref_=wl_share" target="_blank">応援する</a></b>。<a href="https://www.enoden-location.jp/" Target="_blank">公式位置情報</a>。<a href="https://inashu.booth.pm/" Target="_blank">ENO-NIKI アクリルスタンド</a>頒布中。

</span>
</div>
<div id="contents">
<br>
<form name="form">
<div id="mdswitch">
<input hidden id="station" value=""><input hidden id="tt" value="">
<input type="hidden" name="fixed" value="false">
<input type="radio" name="mode" id="easy" onClick="mdchange();" checked><label for="easy" class="radio left">かんたんモード</label><input type="radio" name="mode" id="detail" onClick="mdchange();"><label for="detail" class="radio right">詳細モード</label>
　
<span onclick="b_reset();" class="button reset">リセット</span>
<br>
<select name="y" size="1" onChange="holi();">
<option value="2024">2024</option>
<option value="2025">2025</option>
<option value="2026">2026</option>
</select>年
<select name="mo" size="1" onChange="holi();">
<option value="1">1</option><option value="2">2</option><option value="3">3</option>
<option value="4">4</option><option value="5">5</option><option value="6">6</option>
<option value="7">7</option><option value="8">8</option><option value="9">9</option>
<option value="10">10</option><option value="11">11</option><option value="12">12</option>
</select>月

<select name="d" size="1" onChange="holi();">
<option value="1">1</option><option value="2">2</option><option value="3">3</option>
<option value="4">4</option><option value="5">5</option><option value="6">6</option>
<option value="7">7</option><option value="8">8</option><option value="9">9</option>
<option value="10">10</option><option value="11">11</option><option value="12">12</option>
<option value="13">13</option><option value="14">14</option><option value="15">15</option>
<option value="16">16</option><option value="17">17</option><option value="18">18</option>
<option value="19">19</option><option value="20">20</option><option value="21">21</option>
<option value="22">22</option><option value="23">23</option><option value="24">24</option>
<option value="25">25</option><option value="26">26</option><option value="27">27</option>
<option value="28">28</option><option value="29">29</option><option value="30">30</option>
<option value="31">31</option>
</select>日

<select name="day" size="1" onChange="serviceForm();trainset();">
<option value="0">平日</option>
<option value="1">土休日</option>
</select>
</div>
<div class="sticky" id="stickymenu">

<span class="detail">
<select id="stations" size="1" onChange="position();">
<option value="-1" selected>---場所選択---</option>
<option value="0">藤沢</option>
<option value="0,3">藤沢－鵠沼</option>
<option value="3">鵠沼</option>
<option value="3,5">鵠沼－江ノ島</option>
<option value="5">江ノ島</option>
<option value="5,8">江ノ島－峰ヶ原(信)</option>
<option value="8">峰ヶ原(信)</option>
<option value="8,10">峰ヶ原(信)－稲村ヶ崎</option>
<option value="10">稲村ヶ崎</option>
<option value="10,11">稲村ヶ崎－極楽寺</option>
<option value="11">極楽寺</option>
<option value="11,12">極楽寺－長谷</option>
<option value="12">長谷</option>
<option value="12,15">長谷－鎌倉</option>
<option value="15">鎌倉</option>
<option value="-2" hidden>---列車選択---</option>
</select>
<span onClick="gps();" class="button"><img alt="現在地" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABjElEQVQ4T5WSsUscURDGv9mLpLUIJN35ZgWJgfwBsVPQXssQA9olFgnsO0NMqaL3FrTQdBGiWMZeQbv4BwRUhOw8r4tgkTYktxP2POX23Dv1dTPfN783b+YRuhx2/DmTxcqbTjbqJJjYlEnpR6Yr6XMf+VqRtxvgIyktNAFzPvKL9wKw4yMAg82iY7Hy7M6AsBpOKunX1gJSep1Uks12SOET2PEugNE2855YGbsVEC6FL7Sk3wvbrdNQ8iE5zHXWbuSYv0AxVbgdwoZEMt0R0LfS1xv8C34BeNhhvX/SB+mTs/dnv6/03AyMM3MEmu/2uRT6yVvfWG92cgB2/BNA2A0AIBEr/TcAHPM4FN/aik+b8UAuT5iQSHZyHbDjfQDD10ZCVSKZzWKOeRmKSgvkQKyMXAPKy+WnpaB03DRcqOpLX/F7rbeaqhklom0Aj7J8Pa0P1mZrJ40ZcMxrULwl0Fbak1r/zp8XzcGsmsfB38Ap9BUI6xLJzCXAsaqq9RUf3zLAhmyqJiIiJ1boP7sliRFBOWMxAAAAAElFTkSuQmCC">現在地</span><br class="sp">

</span>
<span id="stationBtn" class="easy">
<input type="radio" name="sta" value="藤沢" id="fuji" onChange="staBtn();"><label for="fuji" class="radio left">藤沢発</label><input type="radio" name="sta" value="鎌倉" id="kama" onChange="staBtn();"><label for="kama" class="radio right">鎌倉発</label>
<input type="radio" name="sta" id="dummy" onChange="staBtn();" hidden>
</span>

<select id="h" size="1" onChange="tt_set();">
<option value="5">5</option>
<option value="6">6</option><option value="7">7</option><option value="8">8</option>
<option value="9">9</option><option value="10">10</option><option value="11">11</option>
<option value="12">12</option><option value="13">13</option><option value="14">14</option>
<option value="15">15</option><option value="16">16</option><option value="17">17</option>
<option value="18">18</option><option value="19">19</option><option value="20">20</option>
<option value="21">21</option><option value="22">22</option><option value="23">23</option>
<!-- <option value="24">24</option> -->
</select>:
<select id="mi" name="mi" size="1" onChange="timeset();">
<option value="分" selected="selected">分</option>
</select>～

遅れ<input id="delay" type="text" size="2" onChange="timeset();">分
<input type="checkbox" id="fixed" onclick="outp();">
<label for="fixed" class="check fixed">訂正</label>
<br>


<!-- チェックボックス系 -->
<span class="detail" >
追記欄
<input id="txtmode" type="checkbox" onClick="clsBtn(this.id,'textbox');"><label for="txtmode" class="check left">車両注記</label><input id="pmode" type="checkbox" onClick="clsBtn(this.id,'pan');"><label for="pmode" class="check center">パンタ</label><input id="depotmode" type="checkbox" onClick="depotBtn();"><label for="depotmode" class="check right">留置車両</label>
<br></span>
<span class="s">←藤沢　海側から見たときの組成　鎌倉→</span>
</div>
<div id="service"></div>

<p class="detail">
<div id="depot" style="display:none;">
<div id="depotTitle">◆留置車両の入力</div>
<span class="s">編成間のプルダウンは連結状態を示します。[・]不明 [ / ]分割 [+]連結</span>
<div id="otherTrain">
</div>
<select id="all" hidden></select>
</div>
<label for="usemode"><input id="usemode" type="checkbox" onClick="outp();" style="display:inline-block;">休/未確認を出力</label><br>

<textarea id="out" onClick="copy();" readonly="readonly" style="background-color:#f3ffff;"></textarea><br>
<p>この内容を<br class="sp">
<span onclick="tweet();" class="tw"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAATCAYAAAB7u5a2AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAHnSURBVDhP7ZU9CHFRGMevrzAYxCCyUBaDMqCUMpgxWUwGi7JZmEyUYlJGGTBaxGAQg0VKyuQzGViUSD7q/zonr9e9zmp7n/p16//8n+fce85z7xVxHIcnPwnx6/qT+N+cGV/NbTYbN5vNuOVySVksFpzb7X5l/4VMJuMajQb1+P3+l/odZFp4JJNJkEin06jX69hsNtBqte+8SCRCuVymnkwmw6sV8C2KxWI0m01MJhPadDweo9VqUZ3kyaIkqtUqXUhY/wFThEajwWq1QqVSgcViwfF4RCqVQiQSoY273S7kcjmz9gOmSHE4HLher4hGowiFQrjf77jdbphOp1Cr1cwaAUzxTSwWw+Vygd1uR7FYpHftdDqZXgZMkUetVsN8PodOp8NwOESn04FEImF6BTBFHoVCgd7xc/RgNptxOBzoobK8Apjim3g8Thv3ej2cTickEgkEg0E8Hg/4fD5mzQdMkRIIBGiT0WgElUqFcDhMD9Xj8SCfz2O328FgMDBrXzBFuFwunM9nrNdr6PX6t14qlbDdbmE0GjEYDOgTSaVSXu0H3yLZ1/1+T/fWarXycgqFgh5qv99HLpejW5bNZnmeD/iCUqlEu93G8/sCr9fLy/3FZDLRWScTRCBe8k4IfT/8E3HcHzgX1nrpYpK5AAAAAElFTkSuQmCC" style="height:1em;">ポストする</span>(<span id="le">0文字</span>)<br class="sp">

<span class="copy" onclick="copy();"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAdCAYAAACwuqxLAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAASASURBVEhL7VZNTFRXFP7em/dmhmH4aQEDthZEIVDjT1JMRQW2YNUI6kLTpsafjSuNJibGBQZ3ZaHGNDFRgyTGKNSyoKZmpLMwSqs0XUAihoIg2pgOBQYzzDBvfvq+M/MIPwN2467fy31vcu89557znXPPGWVN85o4PiDU5PeD4f8D3gul+LtiCbKiKIjHE/HWbTr8IT/W5qzF9frrKM0rlflUeDLyBId+OIRILAKbYkMsHkuuJCAHzFVut9nhm/ahuqgat/bfgqZqaO9rx3hwXH7HzYdQFRWBcAA1xTV4O/UWh388jGxnNqLxKGKxmBhMaKmUVxVWof1AOy54L2BX2S5c7bmKp6+fwm13izBhs9kwGZzE7rLduPTVJThsDkzNTIkOXdXFE8V81KRBQguVby/cjnsH76GxqxEXuy8iw5GBTEcmVqSvSAx3YuS6cmXw0GA4iCxnFjYVbJI908a0eBhX4lD50myaUFBTVIOOrzvQ5G3Cld+uoCCjANGY6bJpzWRoEr6AD2OBMfmSHtJBBKNBbMjfgJa9Lbj/7X3UltQiYAQkJipf3FzxSQVuNNzAyZ9O4rz3vLg8EZwQz8KRMM5UncHdA3fRuq8VbQfbUFdaJ3KEW3fj2etn2Pz9ZtzpvYPjXx6HETWEIolBOBrGicoTcOpOVBdWY0/5HrE805kp9NA7xmDUPyqC9HjgnwHhW7g2dfDrn/FjeHwY2z7bBptqZpT5aFygFzmuHLT+0QrvoBcOzYF3M+/MHAOGxofwcuIl+n39MGIJqyiTm54Lu2aXBOHgIcwyys7OiQdJAZ74wvcCt3tvY2P+RqzPXy8Zw8BtWbVFqOBepqm1t+evntl0tJRSlwXu1fiyUjVNT5OsKM8rx5EvjsCIGOIF1yxQga7paOttQ/dot2TLctD4shSQd7pIvj1/ekT5QogX5n63wy3GUGY5LD7ePItcZqdlI8uRtWgw6FxjgOd6thTEAwty/c38rfu0DqeqTsEwzKAmObZAiuy6HS2/t+BazzWJx3KYdwDj4dSceO57jnOec0tayEN54RizuUFNhXkUUSHp4U1lDLoGu1IOrr3yv5L78D6aFlEUjARRuaoSjesaEY1GU1JExQ8HH6KzvxOqunwWqcwKC1Smmg9rOyvjcoM3mgYtlF+I2XvAETJCErS+v/vwaORRIiWZVnNgzbGMsE4FjWBi3pRPRZfKBeYyF4s+KpLynJeeh9LcUuloJTkl84Y1l+/OR7qejtUfrxajpLil8oAG0pLLv15Gc20z6j+vFytZihdSsBAsZi67C02/NEmdkv1zDqGsUtxcHCfvbBIrM1eK9axBLt0lQktlCWmiQvbu4clhuYDMvmMVx9CwrgE7WncIG5oSN4sdLTEVcsObqTdymzu/6cRZz1k8GHiADGfGkiWB9DhtTukZY9NjCEVC0ktomHhg/XXkBFOOpZtWsbGwNXqHvNJQlrpQ9ES8MR9WgZ1lO/F45DFO/3xaWsDs3xYLdJv807Kbe29ia+HW5Mp/g2fAg6MdR6XxA8C/Nns/lbxAb5sAAAAASUVORK5CYII=" style="height:1em;">コピーする</span>
</p><br>
<span class="bookmark detail" onclick="bookmark();">★この設定をブックマーク</span>
<span class="detail">　※新しく開くページをブックマークに追加してください</span>
<div id="msg"></div>

<textarea name="ttv" hidden></textarea>
</form></div>
<div id="footer">

<div class="s">
<b>●主な特徴●</b><br>
・基準駅と時刻を選択することで、列車の順番や（非公式の）運用番号がわかる。<br>
・江ノ電ファンの間で定型化されている、運用報告文面が簡単に作成できる。<br>
・広告やヘッドマークなど、特徴のある編成が自動的に出力される。<br>
・動いている編成を選択すると、運用に充当していない編成が自動的に出力できる。<br>
・<a href="https://togetter.com/li/2501332" Target="_blank">もっと詳しく</a><br>
<br>
<font color="red">2017年から毎日運用があがっているのは、報告してくださる沿線にいるあなたのおかげです！<br>
報告内容がほかの方と同じ内容でも、一部だけでも、何度していただいても構いません。多少間違っても構いません。<br>
報告があればあるほど運用情報の精度が高くなるほか、誰かが気づかないうちに車両が交換されていることもあります。<br>
是非、このツールを使ってこまめな報告をお願いします。</font><br>
<br>
<b>このツールは、使った人の感想を踏まえて開発方針を決めていく「消費者主導型ツール」です。<br>
ご意見・不具合報告は、<a href="https://twitter.com/enoden_unyo" Target="_blank">@enoden_unyo</a>までリプライをお願いします。</b><br>
<br>
<b>●かんたんモードの使い方●</b><br>
(1) 自動入力されている運用報告日と平日・土休日設定を確認し、設定されていなければ設定します。<br>
(2) 運用報告をする基準となる駅を、藤沢発または鎌倉発を選択します。<br>
(3) (2)で選択した駅を、1番最初の列車が、出発する時刻を選択します。<br>
　 列車が遅延していた場合には最大の分単位の数を空欄に入力します。<br>
(4) 列車の組成を入力します。編成番号は藤沢方の車両番号⁺Fで表記しています。<br>
　4両編成（重連）の場合は左に藤沢方、右に鎌倉方の編成を選択します。<br>
　2両編成（単行）の場合は片方のみ選択し、もうひと枠は［----］のままにします。<br>
　もし、間違った編成を選択してしまった場合は［----］を選択すると、元に戻ります。<br>
　また、編成が確認できなかった場合は［不明］を選択してください。あとで有志がフォローします。<br>
(5) 可能であれば、同じ要領で残りの組成を入力します。<br>
　 運用報告に完璧を求めていません。欠けていても、もちろん1本だけでも全く問題ありません。<br>
(6) ポストボタンを押して、ポスト画面に移動します。<br>
(7) 「ポストする」を押すと運用報告が完了します。<br>
<br>
<b>●詳細モードの機能紹介●</b><br>
「詳細モード」を選択すると、こんなことができます。<br>
▷運用報告の基準となる地点が、全区間に対応し、その地点の発車時刻に合わせた入力フォームが形成される。<br>
▷同じ運用を2度入力できるため、増解結後の運用が報告できる。<br>
▷位置情報の取得により、運用報告の基準となる場所を自動で設定できる。<br>
▷組成の向きを誤入力したときに、編成の向きを反転させることができる。<br>
▷車両注記を自由記述できる。<br>
▷パンタグラフの上昇状況が報告できる。<br>
▷留置車両が報告できる。<br>
▷留置車両の連結状況が報告できる。<br>
▷いつも使う場所・機能がON/OFFになった状態を、ブックマークできる。<br>
▷「訂正」ボタンをクリックすることで、訂正投稿を簡単に投稿できる。(2025.9.20追加)<br>
▷安全性を向上した編成(501F,502F,1502F)と従来編成を連結して入力すると自動で警告し誤入力を防ぐ。(2025.9.20追加)<br>
<br>
<br>
<b>◆リンク◆</b><br>
<b><a href="https://twitter.com/inasyu50/with_replies" Target="_blank">同人サークル「イナシュウ」</a></b>：<a href="https://inashu.booth.pm/" Target="_blank">BOOTH（通販）</a><br>
<a href="http://enodenwiki.web.fc2.com" Target="_blank">江ノ電運用報告文面作成ツール</a>（<a href="https://togetter.com/li/2501332" Target="_blank">もっと詳しく</a>）　<a href="http://enodenwiki.web.fc2.com/index7.html" Target="_blank">段落し文面作成ツール</a><br>
<b><a href="https://twitter.com/enoden_unyo" Target="_blank">@enoden_unyo</a></b>　<a href="https://twitter.com/hashtag/%E6%B1%9F%E3%83%8E%E9%9B%BB%E9%81%8B%E7%94%A8?f=tweets&vertical=default&src=hash" Target="_blank">#江ノ電運用</a>（<a href="https://search.yahoo.co.jp/realtime/search?p=%23江ノ電運用&ei=UTF-8&ifr=tl_sc" Target="_blank">Y!リアルタイム</a>）　<a href="https://twitter.com/search?q=%23%E6%B1%9F%E3%83%8E%E9%9B%BB%E9%81%8B%E7%94%A8%E5%A0%B1%E5%91%8A%E6%96%87%E9%9D%A2%E4%BD%9C%E6%88%90%E3%83%84%E3%83%BC%E3%83%AB%20-%23PR&src=typed_query&f=live" Target="_blank">#江ノ電運用報告文面作成ツール</a>　<a href="https://twitter.com/hashtag/%E6%B1%9F%E3%83%8E%E9%9B%BB%E9%81%8B%E7%94%A86%E9%80%A3%E3%82%AC%E3%83%81%E3%83%A3?src=hashtag_click&f=live"_blank">#江ノ電運用6連ガチャ</a><br>
<b><a href="https://x.com/enoden_informal" Target="_blank">@enoden_informal</a></b>　<a href="https://x.com/search?q=%23%E3%81%8C%E4%B9%97%E8%BB%8A%E3%81%97%E3%81%9F%E6%B1%9F%E3%83%8E%E9%9B%BB&src=typed_query&f=live"_blank">#が乗車した江ノ電</a>　<a href="https://x.com/search?q=%23%E3%81%AB%E7%99%BB%E5%A0%B4%E3%81%97%E3%81%9F%E6%B1%9F%E3%83%8E%E9%9B%BB&src=typed_query&f=live"_blank">#に登場した江ノ電</a>　<a href="https://x.com/search?q=%23%E5%B7%A6%E6%89%8B%E3%82%92%E6%8C%99%E3%81%92%E3%81%A6%E3%81%84%E3%82%8B%E3%82%A2%E3%82%AF%E3%83%AA%E3%83%AB%E3%82%B9%E3%82%BF%E3%83%B3%E3%83%89%E3%82%92%E9%9B%86%E3%82%81%E3%82%8B%E4%BC%9A&src=hashtag_click"_blank">#左手を挙げているアクリルスタンドを集める会</a><br>
<br>
K52氏作成：<b><a href="https://x.com/kotsu113/status/1805212221645234398" Target="_blank">運用表</a></b><br>
<br>
<b><a href="https://www.enoden.co.jp/" Target="_blank">江ノ島電鉄</a>公式</b>：<a href="https://www.enoden.co.jp/news/" Target="_blank">最新情報</a>・<a href="https://www.enoden.co.jp/news/news-release/" Target="_blank">ニュースリリース</a><br>
<a href="https://www.enoden-location.jp/" Target="_blank"><b>位置情報</b></a>（<a href="https://www.enoden-location.jp/?mode=0" Target="_blank">横</a>・<a href="https://www.enoden-location.jp/?mode=1" Target="_blank">縦</a>）・<a href="https://x.com/kotsu113/status/1744697731032269156" Target="_blank">運行状況</a><br>
<b>電話をかける</b>：<a href="tel:0466-23-2355">藤沢駅</a>　<a href="tel:0466-25-3480">江ノ島駅</a>　<a href="tel:0467-22-1782">長谷駅</a>　<a href="tel:0467-22-2101">鎌倉駅</a><br>
<a href="https://twitter.com/Enoden_OFFICIAL/with_replies" Target="_blank">公式Twitter (๑╹ω╹๑ )</a> に <a href="https://twitter.com/search?q=%40Enoden_OFFICIAL&src=typed_query&f=live" Target="_blank">反応している人たちを含む検索結果</a><br>
<a href="https://www.enoden-net.com/enodengoods/" Target="_blank">江ノ電グッズ（江ノ電エリアサービス）</a>公式：<a href="https://twitter.com/enodengoods/with_replies" Target="_blank">Twitter</a>　<a href="https://www.instagram.com/enodengoods/" Target="_blank">Instagram</a><br>
<br>
<b>ほぼ公式</b>：<a href="http://transit.yahoo.co.jp/traininfo/detail/148/0/" Target="_blank">Yahoo!運行状況</a>　配信履歴（<a href="https://x.com/search?q=%E6%B1%9F%E3%83%8E%E5%B3%B6%E9%9B%BB%E9%89%84%E7%B7%9A%20(from%3Apien_tokyo%20OR%20from%3ATrainAccident%20OR%20from%3Adelay_recover%20OR%20from%3Adensya_chien)&src=typed_query&f=live" Target="_blank">Twitter</a>・<a href="https://search.yahoo.co.jp/realtime/search/railway/04-0148-0148?ei=UTF-8&ifr=tl_rl"_blank">Y!リアルタイム</a>）<br>
<b>ニュース</b>：<a href="https://www.google.com/search?sca_esv=321ef75be6dc49b6&sca_upv=1&sxsrf=ACQVn08Q6reMs_c6SPMg9OZiRoDsd0qevw:1712448758353&q=%E6%B1%9F%E3%83%8E%E9%9B%BB&tbm=nws&source=lnms&prmd=ivsnmbtz&sa=X&ved=2ahUKEwjm67_f6K6FAxURh1YBHW3lCKIQ0pQJegQIFBAB&biw=929&bih=1000&dpr=1" Target="_blank">Google</a>・<a href="https://news.yahoo.co.jp/search?p=%E6%B1%9F%E3%83%8E%E9%9B%BB&ei=utf-8" Target="_blank">Yahoo!</a>・<a href="https://news.infoseek.co.jp/search?type=article&q=%E6%B1%9F%E3%83%8E%E9%9B%BB" Target="_blank">Infoseek</a>・<a href="https://prtimes.jp/topics/keywords/%E6%B1%9F%E3%83%8E%E9%9B%BB" Target="_blank">PR TIMES</a><br>
<b>江ノ電沿線新聞</b>：<a href="https://enodenensen.jp/" Target="_blank">TOP</a>・<a href="https://x.com/enodenensen/with_replies" Target="_blank">Twitter</a>・<a href="https://x.com/tankoroken/with_replies" Target="_blank">タンコロ研究会</a><br>
<br>
<b>ライブカメラ</b>：<a href="https://www.youtube.com/@japan-livecam/streams" Target="_blank">Japan Live Camera</a>・<a href="https://www.riviera.co.jp/marina/enoshima/livecamera/" Target="_blank">江の島ヨットハーバーのライブカメラ & 気象情報</a><br>
<b>loo-ool.com</b>：<a href="https://loo-ool.com/rail/EN/" Target="_blank">運用情報</a>　<a href="https://loo-ool.com/rail/EN/34/" Target="_blank">過去データ</a>　<a href="https://loo-ool.com/rail/EN/37/" Target="_blank">時刻表</a>　<a href="https://loo-ool.com/rail/EN/38/" Target="_blank">現在位置</a>　<a href="https://loo-ool.com/rail/EN/96/" Target="_blank">運用解析</a><br>
<b>えれサイト４</b>：<a href="https://www.elesite-next.com/unyou_table" Target="_blank">運用表</a>　<a href="https://www.elesite-next.com/timetable" Target="_blank">時刻表</a>　<a href="https://www.elesite-next.com/train_location" Target="_blank">列車位置</a>　<a href="https://www.elesite-next.com/hensei_table" Target="_blank">編成表</a><br>
<b>2nd-train</b>：<a href="https://2nd-train.net/topics/company/%E6%B1%9F%E3%83%8E%E9%9B%BB//" Target="_blank">江ノ島電鉄の鉄道ニュース(トピックス)一覧</a>　<a href="https://2nd-train.net/formations/company/245/" Target="_blank">編成表</a>　<a href="https://2nd-train.net/sunlight_calculator/" Target="_blank">撮り鉄向け光線計算ツール</a><br>
<br>
<b>Twitter(現:X)</b>：<a href="https://x.com/search?q=%E6%B1%9F%E3%83%8E%E9%9B%BB%20OR%20%23%E6%B1%9F%E3%83%8E%E9%9B%BB%20OR%20%E6%B1%9F%E3%83%8E%E5%B3%B6%E9%9B%BB%E9%89%84%20OR%20%E3%81%AE%E3%82%8A%E3%81%8A%E3%81%8F%E3%82%93%20OR%20%23%E3%81%AA%E3%81%86%E3%81%88%E3%81%AE&src=typed_query&f=live">「江ノ電」で検索</a>（<a href="https://search.yahoo.co.jp/realtime/search?p=%E6%B1%9F%E3%83%8E%E9%9B%BB&ei=UTF-8&ifr=tl_scc" Target="_blank">Y!リアルタイム</a>）
<br>
<b>Instagram</b>：<a href="https://www.instagram.com/explore/tags/%E6%B1%9F%E3%83%8E%E9%9B%BB/" Target="_blank">#江ノ電</a>　<a href="https://www.instagram.com/explore/tags/%E6%B1%9F%E3%81%AE%E9%9B%BB/" Target="_blank">#江の電</a>　<a href="https://www.instagram.com/explore/tags/enoden/" Target="_blank">#enoden</a>　<a href="https://www.instagram.com/explore/locations/235985176/" Target="_blank">鎌倉高校前駅</a>　<a href="https://www.instagram.com/explore/locations/1734238030215135/" Target="_blank">鎌倉高校前1号踏切</a>　<a href="https://www.instagram.com/explore/locations/264439013/" Target="_blank">鎌倉高校駅前踏切</a><br>
<b>新浪微博</b>
：<a href="https://s.weibo.com/realtime?q=%E6%B1%9F%E4%B9%8B%E9%9B%BB&rd=realtime&tw=realtime&Refer=weibo_realtime" Target="_blank">江之電</a>　<a href="https://s.weibo.com/realtime?q=%23%E6%B1%9F%E4%B9%8B%E9%9B%BB&rd=realtime&tw=realtime&Refer=weibo_realtime" Target="_blank">#江之電</a>　<a href="https://s.weibo.com/realtime?q=%E6%B1%9F%E3%83%8E%E9%9B%BB&rd=realtime&tw=realtime&Refer=weibo_realtime" Target="_blank">江ノ電</a><br>
<b>Youtube</b>：<a href="https://www.youtube.com/results?search_query=%E6%B1%9F%E3%83%8E%E9%9B%BB&sp=CAI%253D" Target="_blank">江ノ電</a>　<b>ニコニコ動画</b>：<a href="http://www.nicovideo.jp/search/%E6%B1%9F%E3%83%8E%E9%9B%BB?sort=f&order=d" Target="_blank">江ノ電</a><br>
<b>Facebook</b>：<a href="https://www.facebook.com/search/top/?q=%E6%B1%9F%E3%83%8E%E9%9B%BB" Target="_blank">江ノ電</a>　<a href="https://www.facebook.com/search/top/?q=%E6%B1%9F%E4%B9%8B%E9%9B%BB" Target="_blank">江之電</a>　<a href="https://www.facebook.com/search/top/?q=%E6%B1%9F%E4%B9%8B%E5%B3%B6%E9%9B%BB%E9%90%B5" Target="_blank">江之島電鐵</a>　<a href="https://www.facebook.com/hashtag/%E6%B1%9F%E3%83%8E%E9%9B%BB/" Target="_blank">#江ノ電</a>　<a href="https://www.facebook.com/hashtag/%E6%B1%9F%E4%B9%8B%E9%9B%BB" Target="_blank">#江之電</a>　<a href="https://www.facebook.com/hashtag/%E6%B1%9F%E4%B9%8B%E5%B3%B6%E9%9B%BB%E9%90%B5" Target="_blank">#江之島電鐵</a><br>
<br>
<b><a href="http://www.city.fujisawa.kanagawa.jp/" Target="_blank">藤沢市</a>公式</b>：<a href="https://www.fujisawa-kanko.jp/" Target="_blank">観光協会</a>・<a href="https://vacan.com/place/w4XqALXj" Target="_blank">江ノ電江ノ島駅混雑状況</a><br>
<b><a href="http://www.city.kamakura.kanagawa.jp/" Target="_blank">鎌倉市</a>公式</b>：<a href="https://www.trip-kamakura.com/" Target="_blank">観光協会</a>・<a href="https://www.konzatsu-kamakura.jp/" Target="_blank">観光地と駅の混雑状況</a><br>

<br><b>その他</b>：<a href="https://www.jma.go.jp/bosai/#area_type=class20s&area_code=1420400&pattern=forecast" Target="_blank">気象庁</a>（<a href="https://www.data.jma.go.jp/stats/etrn/index.php?prec_no=46&block_no=1443&year=&month=&day=&view=" Target="_blank">辻堂の過去の気象データ</a>）　<a href="https://www.umitenki.jp/" Target="_blank">海天気.jp</a>（<a href="https://www.umitenki.jp/tenki/1625/1hour" Target="_blank">峰ヶ原</a>・<a href="https://www.umitenki.jp/tenki/1555/1hour" Target="_blank">七里ヶ浜正面</a>）　<a href="https://weathernews.jp/onebox/tenki/kanagawa/14204/" Target="_blank">ウェザーニュース</a>　<a href="https://supercweather.com/" Target="_blank">雲量予測</a>　<a href="https://www.navitime.co.jp/congestion/prediction/railroad?lineId=00000348&from=congestion.prediction.campany" Target="_blank">人混み予報</a>　<a href="https://teideninfo.tepco.co.jp/html/14000000000.html" Target="_blank">停電情報</a>　<a href="https://www.river.go.jp/kawabou/pc/ov?zm=14&clat=35.31649089181301&clon=139.51237678527835&fld=0&mapType=0&viewGrpStg=0&viewRd=1&viewRW=1&viewRiver=1&viewPoint=1&ext=0" Target="_blank">川の防災情報</a><br>
</font>
<br><br><br><br><br>
<font size="-2">以下広告避けスペース
<br><br><br>藤沢<br>｜<br>石上<br>｜<br>柳小路<br>｜<br>鵠沼<br>｜<br>湘南海岸公園<br>｜<br>江ノ島<br>｜<br>腰越<br>｜<br>鎌倉高校前<br>｜<br>峰ヶ原信号場<br>｜<br>七里ヶ浜<br>｜<br>稲村ヶ崎<br>｜<br>極楽寺<br>｜<br>長谷<br>｜<br>由比ヶ浜<br>｜<br>和田塚<br>｜<br>鎌倉<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
保守用
<a href="https://twitter.com/enodenwiki305/with_replies" Target="_blank">@enodenwiki305</a>
　<a href="https://twitter.com/enodenwiki355/with_replies" Target="_blank">@enodenwiki355</a>
　<a href="http://web.fc2.com/controlpanel/filemanager/#elf_f1_Lw" Target="_blank">保守</a>
　<br>
</div>


</div>

<script>
//IEは動作対象外
const userAgent= window.navigator.userAgent.toLowerCase();
if(userAgent.indexOf('msie') != -1 ||  userAgent.indexOf('trident') != -1) {
　alert("Internet Explorerでは正しく動作しません。他のブラウザをご利用ください。");
}
//クエリ処理
qu=location.search;q={};
if(qu.length > 0){
 qu=qu.slice(1).split("&");
  for (i=0;i<qu.length;i++) {
    para = qu[i].split('=');
    q[para[0]] = para[1];
  }
 if(q.mode=="detail"){form.mode[0].checked=false;form.mode[1].checked=true;mdchange();}
 if(q.s){form.stations.value=q.s;}
 if(q.t){form.txtmode.checked=true;}else{form.txtmode.checked=false;}
 if(q.p){form.pmode.checked=true;}else{form.pmode.checked=false;}
 if(q.d){form.depotmode.checked=true;}else{form.depotmode.checked=false;}
 if(q.r){form.usemode.checked=true;}else{form.usemode.checked=false;}
 mdchange();
 position();
 depotBtn();
}

const consoleMsg="Thank you for your ENODEN report!"
console.log(consoleMsg);

class Depot {
  constructor(id, tag, len, pair){
    this._id = id;
    this._tag = tag;
    this._len = len;
    this._pair = pair
  }
  // 番号（現在は元の数値を使っているがいずれ文字列にする）
  get id() {
    return this._id;
  }
  // htmlで指定する名称
  get tag() {
    return this._tag;
  }
  // 留置線の収容両数（江ノ電の場合は2両か4両）
  get len() {
    return this._len;
  }
  // 通常連結した状態で留置するか（true/false）
  get pair() {
    return this._pair
  }
}

var depots = [
  new Depot(11, "藤沢駅<br>", 4, true),
  new Depot(12, "江ノ島駅<br>1番線", 4, true),
  new Depot(13, "2番線", 4, true),
  new Depot(14, "江ノ島留置線<br>#1", 2, false),
  new Depot(16, "#4", 4, false),
  new Depot(17, "稲村ヶ崎駅<br>1番線", 4, true),
  new Depot(18, "2番線", 4, true),
  new Depot(19, "極楽寺検車区<br>引込線", 4, false),
  new Depot(20, "#1", 4, false),
  new Depot(21, "#2", 4, false),
  new Depot(22, "#3", 4, false),
  new Depot(23, "#4", 4, false),
  new Depot(24, "#5", 4, false),
  new Depot(25, "#6", 4, false),
  new Depot(26, "鎌倉駅<br>3番線", 4, true),
  new Depot(27, "4番線", 4, true),
];

//初期処理
function auto() {
  //日時・ダイヤ設定
  let d = new Date();
  let dh = d.getHours();
  if (dh==0) {
    dh = 24;
    d.setDate(d.getDate() - 1);}
  else if (dh<5) {
    dh = 5;}
  let dy = d.getFullYear();
  let dm = d.getMonth() + 1;
  let dd = d.getDate();
  form.y.value = dy;
  form.mo.value = dm;
  form.d.value = dd;
  form.h.value = dh;
  holi();//祝日判定
  let fixed = false;

  position();
}

//モード選択
function mdchange() {
  md = form.mode;
  e1 = document.getElementsByClassName("easy");
  e2 = document.getElementsByClassName("detail");
  if (md[0].checked) {
    for (i=0;i<e1.length;i++) {e1[i].style.display = "inline";}
    for (i=0;i<e2.length;i++) {e2[i].style.display = "none";}
  }
  else if (md[1].checked) {
    for (i=0;i<e1.length;i++) {e1[i].style.display = "none";}
    for (i=0;i<e2.length;i++) {e2[i].style.display = "inline";}
  }
}

//祝日判定
function holi() {
  let dy = form.y.value;
  let dm = form.mo.value;
  let dd = form.d.value;
  let da = new Date(dy, parseInt(dm) - 1, dd).getDay();
  if (dm < 10) {
    dm = "0" + dm;
  }
  if (dd < 10) {
    dd = "0" + dd;
  }
  let dv = 0;
  if (da == 6 || da == 0) {
    dv = 1;
  } else {
    for (i in holiday) {
      if ((dy + "-" + dm + "-" + dd) == holiday[i]) {
        dv = 1;
      }
    }
  }
  form.day.value = dv;
}

//かんたんモード用 駅設定
function staBtn() {
  let e = document.getElementsByName("sta");
  if (e[0].checked) {//藤沢
   form.stations.value="0";}
  else if (e[1].checked) {//鎌倉
   form.stations.value="15";}
  else {
   form.stations.value="-1";
   return false;
  }
 position();
}

//場所に応じた列車リストを取得する
function position() {
 mdchange();
 let e = document.getElementsByName("sta");
 if(form.stations.selectedIndex==1){e[0].checked=true}
 else if(form.stations.selectedIndex==15){e[1].checked=true;}
 else{e[2].checked =true;}

 let v=selectedValue("stations");
 let tt=[];let y;
 let yuki="<span style='font-size:70%;'>行</span>"
 let dome="<span style='font-size:70%;'>止</span>"
 let sta="藤石柳鵠湘江腰高峰七稲極長由和鎌";
 if(parseInt(v)<0){return false;}
 else if(v.match(",")){
  v=v.split(","); v0=parseInt(v[0]); v1=parseInt(v[1]);
   for(i in ttOut){
    if(ttOut[i][v0+2]!==null&&ttOut[i][v1+2]!==null){
     if(ttOut[i][18]){y="≫"+ttOut[i][18]+dome+"≫";}else{y="≫鎌倉"+yuki+"≫";}
     tt.push({"f":"≫","n":ttOut[i][19],"u":ttOut[i][1],"s1":sta.charAt(v0),"t":ttOut[i][v0+2],"t1":ttOut[i][v0+2],"t2":ttOut[i][v1+2],"s2":sta.charAt(v1),"y":y });}
    }
   for(i in ttIn){
    if(ttIn[i][17-v0]!==null&&ttIn[i][17-v1]!==null){
     if(ttIn[i][18]){y="＜"+ttIn[i][18]+dome+"＜";}else{y="＜藤沢"+yuki+"＜";}
     tt.push({"f":"＜","n":ttIn[i][19],"u":ttIn[i][1],"s1":sta.charAt(v0),"t":ttIn[i][17-v1],"t1":ttIn[i][17-v0],"t2":ttIn[i][17-v1],"s2":sta.charAt(v1),"y":y });}
   }
 }
 else{
  v=parseInt(v);
  if(v<15){
   for(i in ttOut){
    if(ttOut[i][v+2]!==null){
     if(ttOut[i][18]){y="≫"+ttOut[i][18]+dome+"≫";}else{y="≫鎌倉"+yuki+"≫";}
     tt.push({"f":"≫","n":ttOut[i][19],"u":ttOut[i][1],"t":ttOut[i][v+2],"t1":ttOut[i][v+2],"y":y ,"s1":"","s2":"","t2":""});}
    }
   }
  if(v>0){
   for(i in ttIn){
    if(ttIn[i][17-v]!==null){
     if(ttIn[i][18]){y="＜"+ttIn[i][18]+dome+"＜";}else{y="＜藤沢"+yuki+"＜";}
     tt.push({"f":"＜","n":ttIn[i][19],"u":ttIn[i][1],"t":ttIn[i][17-v],"t1":ttIn[i][17-v],"y":y ,"s1":"","s2":"","t2":""});}
   }
  }
 }
 tt.sort(function(a,b){
  if(a.t<b.t) return -1;
  if(a.t>b.t) return 1;
 });

 //ダミーを12行追加
 for(i=0;i<12;i++){
  tt.push({"f":"－","n":null,"u":0});
 }
 form.ttv.value=JSON.stringify(tt);
 serviceForm();
 depotForm();
 tt_set();
}

//営業列車入力フォーム作成
function serviceForm(){
 let inner=[];
 for(num=101;num<=112;num++){
   inner.push(
    '<p id="row'+num+'">');
   if(num>106){
    inner.push('<span class="detail">');}
    inner.push(
    '<span id="t'+num+'a">[0]--:--</span><span id="t'+num+'y"></span><br class="sp detail">',
    '<select id="t'+num+'b" onChange="trainset(this);changeColor(this.id);"><option value="">----</option></select>',
    '<span class="detail"><input id="t'+num+'c" type="text" onChange="trainset();" class="textbox" style="display:none;"><span class="textbox"><br class="sp"></span></span>',
    '+',
    '<select id="t'+num+'d" onChange="trainset(this);changeColor(this.id);"><option value="">----</option></select>',
    '<span class="detail"><input id="t'+num+'e" type="text" onChange="trainset();" class="textbox" style="display:none;"></span>',
    '<span class="detail">',
    '<span id="t'+num+'r" onClick="reverse(this.id);outp();" class="reverse" nowrap>反転</span>',
    '<select id="t'+num+'p" onChange="outp();" class="pan" style="display:none;"><option value="">(パンタ)</option><option value="全">全パン</option><option value="F↑">F↑</option><option value="K↑">K↑</option></select>',
    '</span>',
    '<span id="t'+num+'x" class="rare"></span>');
   if(num>106){
    inner.push('</span>');}

    inner.push('</p>');

  }
 document.getElementById("service").innerHTML=inner.join("\n");
}


//留置車両入力フォーム作成
function depotForm(){
 let inner=[];
 for(let depot of depots){
   depotRow=['<p id="row'+depot.id+'">'];
   depotRow.push(depot.tag);

   depotRow.push(
    '<select id="t'+depot.id+'b" onChange="trainset(this);changeColor(this.id);"><option value="">----</option></select>',
    '<span class="detail"><input id="t'+depot.id+'c" type="text" onChange="trainset();" class="textbox" style="display:none;">',
    '<select id="t'+depot.id+'q" onChange="outp();" class="pan" style="display:none;"><option value="">(パンタ)</option><option value="全">↑全パン</option><option value="F↑">F↑</option><option value="K↑">K↑</option><option value="下げ">↓下</option></select>',
    '<span class="textbox"><br class="sp"></span></span>',
    '<select id="t'+depot.id+'g" onChange="trainset();"><option value="・">・</option><option value="/">/</option><option value="+" selected>+</option></select>',
    '<select id="t'+depot.id+'d" onChange="trainset(this);changeColor(this.id);"><option value="">----</option></select>',
    '<span class="detail"><input id="t'+depot.id+'e" type="text" onChange="trainset();" class="textbox" style="display:none;"></span>',
    '<span class="detail">',
    '<span id="t'+depot.id+'r" onClick="reverse(this.id);outp();" class="reverse" nowrap>反転</span>',
    '<select id="t'+depot.id+'p" onChange="outp();" class="pan" style="display:none;"><option value="">(パンタ)</option><option value="全">↑全パン</option><option value="F↑">F↑</option><option value="K↑">K↑</option><option value="下げ">↓下</option></select>',
    '</span>',
    '<span id="t'+depot.id+'x"></span>');
    depotRow.push('</p>');
    inner.push(depotRow.join(""));

  }
 document.getElementById("otherTrain").innerHTML=inner.join("\n");
 for(let depot of depots){
  if(depot.len==2){
    //短い留置線は1編成しか表示しない
    document.getElementById("t"+depot.id+"g").style.display= "none";
    document.getElementById("t"+depot.id+"d").style.display= "none";
    document.getElementById("t"+depot.id+"e").style.visibility= "collapse";
    document.getElementById("t"+depot.id+"r").style.display= "none";
    document.getElementById("t"+depot.id+"q").style.display= "none";
    // 短い留置線の処理はここで終わり
    continue;
  }
  if(!depot.pair){
    //通常切り離した状態で留置されている江ノ島留置線と極楽寺検車区は初期表示を「・」にする
    document.getElementById("t"+depot.id+"g").value= "・";
  }
 }
}

//時刻表の設定
function tt_set() {
 let tt=JSON.parse(form.ttv.value);
 let m=[];
  for (i in tt) {
    if (form.h.value < 10 && String(tt[i].t).charAt(0) == form.h.value) {
      m.push(String(tt[i].t).slice(1));
    } else if (form.h.value >= 10 && String(tt[i].t).substr(0, 2) == form.h.value) {
      m.push(String(tt[i].t).slice(2));
    }
  }
  document.getElementById("mi").innerHTML = "";
  for (i in m) {
    document.getElementById("mi").innerHTML += '<option value="' + m[i] + '">' + m[i] + '</option>';
  }
 timeset();
}

function fixed(){
  const label = document.getElementById('fixed');
  label.classList.toggle('checked', checkbox.checked);
}

//出発時刻・運用番号の設定
function timeset() {
  //時刻表データ取得
  let tt = JSON.parse(form.ttv.value);

  //出発時刻表示
  let t=[];
  let h = form.h.value;
  let m = form.mi.value;
  let hm=h+""+m;
  for (i=0;i<tt.length;i++) {
    if (hm == tt[i].t) {
     for(j=0;j<12;j++){t.push(tt[i+j]);}
     break;
    }
  }

  for (i in t) {
    if (t[i].t1 == undefined) {
      t[i].t1 = "--:--";
    } else if (t[i].t1 < 1000) {
      t[i].t1 = "0" + String(t[i].t1).substr(0, 1) + ":" + String(t[i].t1).substr(1, 2);
    } else {
      t[i].t1 = String(t[i].t1).substr(0, 2) + ":" + String(t[i].t1).substr(2, 2);
    }

    if (t[i].t2 == undefined) {
      t[i].t2 = "--:--";
    } else if (t[i].t2 < 1000) {
      t[i].t2 = "0" + String(t[i].t2).substr(0, 1) + ":" + String(t[i].t2).substr(1, 2);
    } else {
      t[i].t2 = String(t[i].t2).substr(0, 2) + ":" + String(t[i].t2).substr(2, 2);
    }
  }

  let v=selectedValue("stations");
  //表示
  for (i = 0; i < t.length; i++) {
   d="<span id='t"+(i+101)+"n' hidden>"+t[i].n+"</span><span class='b" + t[i].u + "'>[" + t[i].u + "]</span><span class='u" + t[i].u + "'>";
   if(v.match(",")){//駅間
    d+= t[i].s1 + t[i].t1 +t[i].y + t[i].t2 + t[i].s2 ;}
   else{//駅
    d+= t[i].t1 + t[i].y ;}
    document.getElementById("t"+(101+i)+"a").innerHTML = d+"</span> ";
  //使わない行は非表示
  if(t[i].t==undefined){
   document.getElementById("row"+(101+i)).style.display= "none";}
  else{
   document.getElementById("row"+(101+i)).style.display= "inherit";}

    enable("t" + (i + 101) + "b");
    enable("t" + (i + 101) + "c");
    enable("t" + (i + 101) + "d");
    enable("t" + (i + 101) + "e");
  }
 mdchange();//CSSは要素を作った後に適用しないとだめらしい
  trainset();
}

function trainset(e) {
  
  //使用済の選択肢をリスト化
  let usearr = [
    form.t101b.value, form.t101d.value, form.t102b.value, form.t102d.value,
    form.t103b.value, form.t103d.value, form.t104b.value, form.t104d.value,
    form.t105b.value, form.t105d.value, form.t106b.value, form.t106d.value,
    form.t107b.value, form.t107d.value, form.t108b.value, form.t108d.value,
    form.t109b.value, form.t109d.value, form.t110b.value, form.t110d.value,
    form.t111b.value, form.t111d.value, form.t112b.value, form.t112d.value,
    form.t11b.value, form.t11d.value, form.t12b.value, form.t12d.value,
    form.t13b.value, form.t13d.value, form.t14b.value, 
    form.t16b.value, form.t16d.value, form.t17b.value, form.t17d.value,
    form.t18b.value, form.t18d.value, form.t19b.value, form.t19d.value,
    form.t20b.value, form.t20d.value, form.t21b.value, form.t21d.value,
    form.t22b.value, form.t22d.value, form.t23b.value, form.t23d.value,
    form.t24b.value, form.t24d.value, form.t25b.value, form.t25d.value,
    form.t26b.value, form.t26d.value, form.t27b.value, form.t27d.value
  ];

  console.log(e);
  if(e!==undefined){
    cnt = ( (","+usearr.join(",")).match( new RegExp("," + e.value, "g" ) ) || [] ).length ;
    if(cnt>1&&e.value!==""&&e.value!=="不明"){
      r=window.confirm(e.value+"が複数回入力されています。合っていますか？");
      if(!r){document.getElementById(e.id).value="";return false}
    }
    // 安全対策ペアのチェック
    checkSafetyPair(e);
  }
       

  for (let i = 0; i < usearr.length; i++) {
    if (usearr[i] == "" || usearr[i] == "不明") {
      usearr.splice(i, 1);
      i = i - 1;
    }
  }
  let inner = '<option value="">----</option>';
  let bg=[];
  for (i in trains) {
    inner += '<option ';
    inner += 'value="' + trains[i].num +
             '" style="background-color:'+trains[i].bg+
             '; color:'+trains[i].color+
             '">' + trains[i].num + '</option>';
  }

  all = inner.replace('<option value="">----</option>', "").replace('<option value="不明">不明</option>', "");
  document.getElementById("all").innerHTML = all;
  for (i = 101; i < 113; i++) {
    if (document.getElementById("t" + i + "b").value == "") {
      document.getElementById("t" + i + "b").innerHTML = inner;
    }
    if (document.getElementById("t" + i + "d").value == "") {
      document.getElementById("t" + i + "d").innerHTML = inner;
    }
  }
  for (let depot of depots) {
    if (document.getElementById("t" + depot.id + "b").value == "") {
      document.getElementById("t" + depot.id + "b").innerHTML = inner;
    }
    if(depot.len == 4){
     if (document.getElementById("t" + depot.id + "d").value == "") {
      document.getElementById("t" + depot.id + "d").innerHTML = inner;
    }}
  }
  outp();
}

function checkSafetyPair(e) {
  if (!e || !e.value || e.value === "不明") return; // 空入力はスキップ

  // 入力された要素のIDを取得
  const id = e.id; // 例: "t101b" または "t101d"

  // ペアのIDを決定
  let pairId;
  if (id.endsWith("b")) {
    pairId = id.replace(/b$/, "d"); // t101b → t101d
  } else if (id.endsWith("d")) {
    pairId = id.replace(/d$/, "b"); // t101d → t101b
  } else {
    return; // ペアが不明な場合は終了
  }

  const pairValue = document.getElementById(pairId)?.value;

  if (!pairValue || pairValue === "不明") return; // ペアが未入力ならスキップ

  // trains マップを作成
  const trainMap = {};
  trains.forEach(t => {
    trainMap[t.num] = t.safety; // boolean化
  });

  const safety1 = trainMap[e.value] || false;
  const safety2 = trainMap[pairValue] || false;

  const xor = safety1 !== safety2; // 排他的論理和

  if (xor) {
    const r = window.confirm(`${e.value} と ${pairValue} は通常連結できない組み合わせです。合っていますか？`);
    if (!r) {
      e.value = "";
      document.getElementById(pairId).value = "";
    }
  }
}


function outp() { 
  // 基準駅未選択
  if (form.stations.value<0) {
    alert("先に基準となる駅を選択してください。");
    errorStyle("stations");
    errorStyle("stationBtn");
    return false
  }else{
    normalStyle("stations");
    normalStyle("stationBtn");
  }

 clsBtn("txtmode","textbox");
 clsBtn("pmode","pan");
    form.out.value = "";

 //留置車両の選択肢に応じてプルダウンをdisabled
  for (let depot of depots) {
  if(document.getElementById("t"+depot.id+"g").value=="・"){
   document.getElementById("t"+depot.id+"q").disabled=false;
  }else{
   document.getElementById("t"+depot.id+"q").disabled=true;
  }
  }

  //ヘッダ部
  let d = new Date(form.y.value, form.mo.value - 1, form.d.value);
  let day = "日月火水木金土".charAt(d.getDay());
  let text = form.y.value + "/" + form.mo.value + "/" + form.d.value + "(" + day + ")#江ノ電運用";
  //朝夜判定
   morning=false; night=false;
   for(i=101;i<112;i++){
    ai=document.getElementById("t"+i+"a").innerText;
    ni=document.getElementById("t"+i+"n").innerText;
    if(document.getElementById("t"+i+"b").value+document.getElementById("t"+i+"d").value!==""){
    //鎌倉方向
    if(ai.match("≫")){
     if(form.day.value==0&&ni.match("朝")){
      morning=true;}
     else if(form.day.value==1&&ni=="朝"){
      morning=true;}
     else if(ni=="夜"){
      night=true;}
     }
    //藤沢方向
    if(ai.match("＜")){
     if(form.day.value==0&&ni.match("朝")){
      morning=true;}
     else if(form.day.value==1&&ni=="朝"){
      morning=true;}
     else if(ni=="夜"){
      night=true;}
    }
    }
   }
  const fixedCheck = document.getElementById("fixed");

  if (fixedCheck.checked) {
    text = "【訂正】" + text;
  }
   if(morning){text+="(朝)";}
   if(night){text+="(夜)";}

  let blank= blank_input();
  let depot= depot_input();
  let unknown= unknown_input();

  //留置のみ入力時
  if(depot&&blank==0){text=text.replace(/\(朝\)|\(夜\)/g,"")+"";}

  //遅れがあるとき用のハッシュタグ付加
  if (form.delay.value!="") {text+=" #なうえの";}

  //営業列車分
  service=outpService(text);
  if(service.length>0){
   text+="\n"+service.join("\n");
  }
  //留置編成
   if(depot){text= text+"\n"+outpDepot();}
   form.out.value = text;

  //休・未確認編成
  all=document.getElementById("all").options;
   if(form.usemode.checked){
   let usearr2 = [
    form.t101b.value, form.t101d.value, form.t102b.value, form.t102d.value,
    form.t103b.value, form.t103d.value, form.t104b.value, form.t104d.value,
    form.t105b.value, form.t105d.value, form.t106b.value, form.t106d.value,
    form.t107b.value, form.t107d.value, form.t108b.value, form.t108d.value,
    form.t109b.value, form.t109d.value, form.t110b.value, form.t110d.value,
    form.t111b.value, form.t111d.value, form.t112b.value, form.t112d.value,
    form.t11b.value, form.t11d.value, form.t12b.value, form.t12d.value,
    form.t13b.value, form.t13d.value, form.t14b.value, 
    form.t16b.value, form.t16d.value, form.t17b.value, form.t17d.value,
    form.t18b.value, form.t18d.value, form.t19b.value, form.t19d.value,
    form.t20b.value, form.t20d.value, form.t21b.value, form.t21d.value,
    form.t22b.value, form.t22d.value, form.t23b.value, form.t23d.value,
    form.t24b.value, form.t24d.value, form.t25b.value, form.t25d.value,
    form.t26b.value, form.t26d.value, form.t27b.value, form.t27d.value ];

    ar=[];
    for (i in all) {
      value=all[i].value;
      if (value!==undefined&&value!=="不明") { ar.push(value);}
    }
    ar=" "+ar.join(" ");
    for(i in usearr2){
      ar=ar.replace(new RegExp(" "+usearr2[i],"g")," ");
   }
    ar=ar.replace(/  /g," ").replace(/  /g," ").replace("検","\n検");
    if(ar.slice(0,1)==" "){ar=ar.slice(1);}

    //休→未確認
    if(unknown || blank<2) {
      ar = "未確認 " + ar;
    } else if (ar.length > 0) {
      ar = "休 " + ar;
    }
    form.out.value = text +"\n"+ ar;
  }

  document.getElementById("le").innerText = form.out.value.length + "文字";
}


function outpService(text){
 //基準駅取得
 g=document.getElementById("stations");
 stationInfo=g.options[g.selectedIndex].text;
 stationInfo=stationInfo.replace(/(.).{1,5}－/,"$1－").replace(/－(.).{1,5}/,"－$1");

 //基準時刻取得
 stationInfo+=form.h.value+":"+form.mi.value;
 //遅延分
 if(form.delay.value!=""){stationInfo+="(+"+form.delay.value+"分)";}
 //1本目の番号
 stationInfo+=document.getElementById("t101a").innerText.substr(0,3)+"～";

 //入力内容取得
 arr=[];
 for(i=101;i<=112;i++){
  d=document.getElementById("t"+i+"a").innerText,
  d=d.split(/\[|\]/);
  e={"f":d[0],"u":d[1],"t":d[2],
     "b":selectedValue("t"+i+"b"),
     "c":document.getElementById("t"+i+"c").value,
     "d":selectedValue("t"+i+"d"),
     "e":document.getElementById("t"+i+"e").value,
     "p":selectedValue("t"+i+"p")};

  if(text.match(/\(朝\)|\(夜\)/)){
   r="";}
  else{r=rare(e.b,e.d);}
   document.getElementById("t"+i+"x").innerHTML=r;
   e.x=document.getElementById("t"+i+"x").innerText;


  if(e.b+e.d!==""){arr.push(e);}
 }

 if(arr.length>0){
  arr.sort(function(a,b){
   if(a.u>b.u) return 1;
   if(a.u<b.u) return -1;
   return 0;
  });
 }

 d={};
 let da;
 for(i in arr){
  note="";
  e="u"+arr[i].u+arr[i].b+arr[i].d+"p"+arr[i].p;
  f="["+arr[i].u+"]";
  if(arr[i].b!==""){f+=arr[i].b;note=numToNote(arr[i].b);
   if(note!==""&&arr[i].c!==""){f+="("+note+"・"+arr[i].c+")";}
   else if(arr[i].c!==""||note!==""){f+="("+note+arr[i].c+")";}
  }
  if(arr[i].b!==""&&arr[i].d!==""){f+="+";}
  if(arr[i].d!==""){f+=arr[i].d;note=numToNote(arr[i].d);
   if(note!==""&&arr[i].e!==""){f+="("+note+"・"+arr[i].e+")";}
   else if(arr[i].e!==""||note!==""){f+="("+note+arr[i].e+")";}
  }
  if(arr[i].p!==""){f+="<"+arr[i].p+">";}
  if(arr[i].x!==""){f+="【"+arr[i].x+"】";}

  da=d["u"+arr[i].u];
  if(da==undefined){
    d["u"+arr[i].u]={};
    d["u"+arr[i].u].e=[e];
    d["u"+arr[i].u].f=[f];
    d["u"+arr[i].u].g=[arr[i].t];
   }
  else if(da.e[da.e.length-1]!==e){
    d["u"+arr[i].u].e.push(e);
    d["u"+arr[i].u].f.push(f);
    d["u"+arr[i].u].g.push(arr[i].t);
   }
 }

 e=[stationInfo];
 for(i in d){
  if(d[i].f.length==1){
   e.push(d[i].f[0]);
  }else{
   for(j in d[i].f){
    e.push(d[i].f[j]+" ※"+d[i].g[j].substr(0,6).replace(/＜|≫/g,""));
   }
  }
 }
 return e
}

function numToNote(num){
 for(k in trains){
  if(trains[k].num==num){
   if(trains[k].note==undefined){return ""}
   else if(trains[k].note==""){return ""}
   else{return trains[k].note}
  }}
}



//留置列車生成
function outpDepot() {
  let arr = [];
  for (let depot of depots) {
  e={"b":selectedValue("t"+depot.id+"b"),
     "c":document.getElementById("t"+depot.id+"c").value,
     "d":selectedValue("t"+depot.id+"d"),
     "e":document.getElementById("t"+depot.id+"e").value,
     "g":document.getElementById("t"+depot.id+"g").value,
     "q":selectedValue("t"+depot.id+"q"),
     "p":selectedValue("t"+depot.id+"p")};
  arr.push(e);
 }

 e=[];
 for(i in arr){
  note="";
  f="";
  if(arr[i].b!==""){f+=arr[i].b;note=numToNote(arr[i].b);
   if(note!==""&&arr[i].c!==""){f+="("+note+"・"+arr[i].c+")";}
   else if(arr[i].c!==""||note!==""){f+="("+note+arr[i].c+")";}
  }
  if(arr[i].q!==""){f+="<"+arr[i].q+">";}
  if(arr[i].b!==""&&arr[i].d!==""){f+=arr[i].g;}
  if(arr[i].d!==""){f+=arr[i].d;note=numToNote(arr[i].d);
   if(note!==""&&arr[i].e!==""){f+="("+note+"・"+arr[i].e+")";}
   else if(arr[i].e!==""||note!==""){f+="("+note+arr[i].e+")";}
  }
  if(arr[i].p!==""){f+="<"+arr[i].p+">";}
  e.push(f);
}

 //藤沢駅
 let localtion = [
  "藤沢駅 ",
  "江ノ島駅\n1番線 ",
  "2番線 ",
  "江ノ島留置線\n#1 ",
  "#4 ",
  "稲村ヶ崎駅\n1番線 ",
  "2番線 ",
  "極楽寺検車区\n引込線 ",
  "#1 ",
  "#2 ",
  "#3 ",
  "#4 ",
  "#5 ",
  "#6 ",
  "鎌倉駅\n3番線 ",
  "4番線 "
 ]
  
 for(i in localtion) {
  e[i]=localtion[i]+e[i];
 }

 e.push("");
 e=e.join("\n")
    .replace("藤沢駅 \n","").replace("江ノ島駅\n1番線 \n2番線 \n","")
    .replace("江ノ島留置線\n#1 \n#4 \n","")
    .replace("稲村ヶ崎駅\n1番線 \n2番線 \n","")
    .replace("極楽寺検車区\n引込線 \n#1 \n#2 \n#3 \n#4 \n#5 \n#6 \n","")
    .replace("鎌倉駅\n3番線 \n4番線 \n","")
    .replace(/引込線 \n/g,"")
    .replace(/\d番線 \n/g,"")
    .replace(/#\d \n/g,"")
    .replace(/\n{2,10}/g,"\n");
  return e;
}

//営業列車の空欄の有無
function blank_input() {
  let cnt=0;
  let ar = [
    form.t101b.value + form.t101d.value,
    form.t102b.value + form.t102d.value,
    form.t103b.value + form.t103d.value,
    form.t104b.value + form.t104d.value,
    form.t105b.value + form.t105d.value,
    form.t106b.value + form.t106d.value,
    form.t107b.value + form.t107d.value,
    form.t108b.value + form.t108d.value,
    form.t109b.value + form.t109d.value,
    form.t110b.value + form.t110d.value,
    form.t111b.value + form.t111d.value,
    form.t112b.value + form.t112d.value
  ];
  for (i in ar) {
    if (ar[i].length == 0) {
      cnt++;
  }}

  //すべて空欄（入力無し）
  if(cnt==12){return 0}
  //6列車未満(一部未確認)
  else if(cnt>6){return 1}
  //6列車以上(すべて確認済)
  else{return 2}
}

//営業列車の不明の有無
function unknown_input() {
  let ar = [
    form.t101b.value + form.t101d.value,
    form.t102b.value + form.t102d.value,
    form.t103b.value + form.t103d.value,
    form.t104b.value + form.t104d.value,
    form.t105b.value + form.t105d.value,
    form.t106b.value + form.t106d.value,
    form.t107b.value + form.t107d.value,
    form.t108b.value + form.t108d.value,
    form.t109b.value + form.t109d.value,
    form.t110b.value + form.t110d.value,
    form.t111b.value + form.t111d.value,
    form.t112b.value + form.t112d.value
  ];
  for (i in ar) {
    if (ar[i].match("不明")) {
      return true;
    }
  }
  return false;
}

//留置線群の入力有無
function depot_input() {
  let ar = [
    form.t11b.value + form.t11c.value + form.t11d.value + form.t11e.value,
    form.t12b.value + form.t12c.value + form.t12d.value + form.t12e.value,
    form.t13b.value + form.t13c.value + form.t13d.value + form.t13e.value,
    form.t14b.value + form.t14c.value,
    form.t16b.value + form.t16c.value + form.t16d.value + form.t16e.value,
    form.t17b.value + form.t17c.value + form.t17d.value + form.t17e.value,
    form.t18b.value + form.t18c.value + form.t18d.value + form.t18e.value,
    form.t19b.value + form.t19c.value + form.t19d.value + form.t19e.value,
    form.t20b.value + form.t20c.value + form.t20d.value + form.t20e.value,
    form.t21b.value + form.t21c.value + form.t21d.value + form.t21e.value,
    form.t22b.value + form.t22c.value + form.t22d.value + form.t22e.value,
    form.t23b.value + form.t23c.value + form.t23d.value + form.t23e.value,
    form.t24b.value + form.t24c.value + form.t24d.value + form.t24e.value,
    form.t25b.value + form.t25c.value + form.t25d.value + form.t25e.value,
    form.t26b.value + form.t26c.value + form.t26d.value + form.t26e.value,
    form.t27b.value + form.t27c.value + form.t27d.value + form.t27e.value
  ];
  for (i in ar) {
    if (ar[i].length > 0) {
      return true;
    }
  }
  return false;
}


//処理系汎用
function selectedValue(e){
 elem=document.getElementById(e);
 return elem[elem.selectedIndex].value
}

function disable(id) {
  document.getElementById(id).disabled = true;
}

function enable(id) {
  document.getElementById(id).disabled = false;
}

function errorStyle(id) {
  document.getElementById(id).style.backgroundColor = 'yellow';
  document.getElementById(id).style.color = 'red';
}

function normalStyle(id) {
  document.getElementById(id).style.backgroundColor = 'transparent';
  document.getElementById(id).style.color = '#000';
}

function changeColor(id) {
    var e = document.getElementById(id);
    e.style.backgroundColor = e.options[e.selectedIndex].style.backgroundColor;
    e.style.color = e.options[e.selectedIndex].style.color;
}


//反転処理
function reverse(e){
 e=e.slice(0,-1);
 eb=document.getElementById(e+"b").value;
 ebColor=document.getElementById(e+"b").style.color;
 ebBg=document.getElementById(e+"b").style.backgroundColor;
 ec=document.getElementById(e+"c").value;
 ed=document.getElementById(e+"d").value;
 edColor=document.getElementById(e+"d").style.color;
 edBg=document.getElementById(e+"d").style.backgroundColor;
 ee=document.getElementById(e+"e").value;
 //単独のときは処理しない
 if(eb.length==0||ed.length==0){return false}

 if(window.confirm(eb+"+"+ed+"を反転しますか？")==false){return false}

 //反転処理は一つずつ行なってプルダウンも毎回処理する
 document.getElementById(e+"b").value="";
 document.getElementById(e+"d").value="";
 trainset();
 document.getElementById(e+"b").value=ed;
 document.getElementById(e+"c").value=ee;
 document.getElementById(e+"b").style.color =edColor;
 document.getElementById(e+"b").style.backgroundColor =edBg;
 trainset();
 document.getElementById(e+"d").value=eb;
 document.getElementById(e+"e").value=ec;
 document.getElementById(e+"d").style.color =ebColor;
 document.getElementById(e+"d").style.backgroundColor =ebBg;
 trainset();
}

//初期化
function b_reset() {
  e = form.elements;
  if (window.confirm("入力内容をリセットしますか？")) {
    let e = form.elements;
    for (i in e) {
      switch (e[i].type) {
      case "text":
      case "textarea":
        e[i].value = "";
        break;
      case "checkbox":
      case "radio":
        e[i].checked = false;
        break;
      case "select-one":
        e[i].selectedIndex = 0;
        break;
      }
    }
    auto();
  }
}


//コピー
function copy() {
  let copyText = document.getElementById("out");
  if(copyText.value==""){return false;}

  document.getElementById("msg").style.animation = "";
  document.getElementById("msg").innerText= "コピーしました";
  document.getElementById("msg").style.animationFillMode = "forwards";
  document.getElementById("msg").style.animationDelay = "0.1s";
  copyText.select();
  document.execCommand("Copy");

  document.getElementById("msg").style.animation = "fadeOut 3.9s 1";
}


//ツイート
function tweet() {
  let s=encodeURIComponent(form.out.value);
  window.open('https://twitter.com/intent/tweet?text=' + s+'&related='+account);
}

//マシュマロ
function mashmallow(){
  window.open('https://marshmallow-qa.com/enodenwiki');
}



//現在地機能
function gps(){
 if( navigator.geolocation ){
  navigator.geolocation.getCurrentPosition( gpsScs , gpsErr ) ;
 }else{
  alert("【位置の取得に失敗しました】\nお使いの環境で位置情報が利用できません。");
 }
}
function gpsScs(pos){
 let coords={
  "藤沢":[35.337196,139.487292],
  "石上":[35.332315,139.48557],
  "柳小路":[35.327435,139.485173],
  "鵠沼":[35.321169,139.482528],
  "湘南海岸公園":[35.314858,139.483737],
  "江ノ島":[35.311792,139.487742],
  "腰越":[35.308329,139.4933],
  "鎌倉高校前":[35.306718,139.500552],
  "峰ヶ原":[35.306333, 139.505444],
  "七里ヶ浜":[35.306298,139.510331],
  "稲村ヶ崎":[35.304282,139.522277],
  "極楽寺":[35.309221,139.52873],
  "長谷":[35.311318,139.536015],
  "由比ヶ浜":[35.312804,139.541487],
  "和田塚":[35.313693,139.545403],
  "鎌倉":[35.319031,139.550703],
 }
 let y=[];let x;
 for(i in coords){
  x=distance([pos.coords.latitude,pos.coords.longitude],[coords[i][0],coords[i][1]]);
  //2000m以上離れると使用できない
  if(x<=2000){y.push({"distance":Math.round(x),"name":i});}
 }
 if(y.length==0){alert("この機能は江ノ電沿線で使用できます。");return false;}
 let near = null;
/*
 for (let z of y) {
    if (!near || z.distance < near.distance) near = z ;
 }
*/

y.forEach(function (z) {
  if (!near || z.distance < near.distance) near = z;
});


 x=null;
 switch(near.name){
  case "藤沢":x=1;break;
  case "石上":
  case "柳小路":x=2;break;
  case "鵠沼":x=3;break;
  case "湘南海岸公園":x=4;break;
  case "江ノ島":x=5;break;
  case "腰越":
  case "鎌倉高校前":x=6;break;
  case "峰ヶ原":x=7;break;
  case "七里ヶ浜":x=8;break;
  case "稲村ヶ崎":x=9;break;
  case "極楽寺":x=11;break;
  case "長谷":x=13;break;
  case "由比ヶ浜":
  case "和田塚":x=14;break;
  case "鎌倉":x=15;break;
 }
 form.stations.selectedIndex=x;
 position();
}

function gpsErr(err){
 const msg = {
  0: "原因不明のエラーです。" ,
  1: "位置情報の取得が許可されていません。" ,
  2: "電波状況の良いところで試してください。" ,
  3: "タイムアウトしました。" };
 alert("【位置の取得に失敗しました】\n"+msg[err.code] );
}

function distance(pos0,pos1) {
  pos0[0] *= Math.PI / 180;
  pos0[1] *= Math.PI / 180;
  pos1[0] *= Math.PI / 180;
  pos1[1] *= Math.PI / 180;
  return 6371000 * Math.acos(Math.cos(pos0[0]) * Math.cos(pos1[0]) * Math.cos(pos1[1] - pos0[1]) + Math.sin(pos0[0]) * Math.sin(pos1[0]));
}




//レア度算出
function rare(a,b){
 let c=0;
 if(a.length==0){a=b;}
 if(b.length==0){b=a;}
 if(a.match("検")){a=a.replace("検 ","");}
 if(b.match("検")){b=b.replace("検 ","");}
 if(!rareData[a]||!rareData[b]){return ""}

 switch(b){
  case "305F": c=rareData[a][0];break;
  case "1001F":c=rareData[a][1];break;
  case "1002F":c=rareData[a][2];break;
  case "1101F":c=rareData[a][3];break;
  case "1201F":c=rareData[a][4];break;
  case "1501F":c=rareData[a][5];break;
  case "1502F":c=rareData[a][6];break;
  case "2001F":c=rareData[a][7];break;
  case "2002F":c=rareData[a][8];break;
  case "2003F":c=rareData[a][9];break;
  case "10F":  c=rareData[a][10];break;
  case "21F":  c=rareData[a][11];break;
  case "22F":  c=rareData[a][12];break;
  case "501F": c=rareData[a][13];break;
  case "502F": c=rareData[a][14];break;
  default:c=null;
 }





let d;
//全排出率の第1四分位以上[N]
if(c>=0.00723427935447969){d="<span class='rareN'>N</span>";}
//全排出率の中央値以上[R]
 else if(c>=0.00370988684845112){d="<span class='rareR'>R</span>";}
//全排出率の第3四分位以上[SR]
 else if(c>=0.00204043776664812){d="<span class='rareSR'>SR</span>";}
 
 
 
 
 
//全排出率の第3四分位*0.75%未満[SSR]
 else{d="<span class='rareSSR'>SSR</span>";}

 return d
}



//留置車両入力　表示・非表示
function depotBtn(){
 e=form.depotmode.checked;
 if(e){document.getElementById("depot").style.display="block";}
 else{document.getElementById("depot").style.display="none";}
}

//クラス毎 表示・非表示
function clsBtn(id,cls){
 c=document.getElementById(id).checked;
 e = document.getElementsByClassName(cls);
  if (c) {
    for (i=0;i<e.length;i++) {e[i].style.display = "inline";}
  }
  else{
    for (i=0;i<e.length;i++) {e[i].style.display = "none";}
  }

}


//ブックマーク用URLで開く
function bookmark(){
 query=["mode=detail"];
 //現在地
 query.push("s="+form.stations.value);
 //車両追記
 if(document.getElementById("txtmode").checked){
  query.push("t=true")}
 //パンタ
 if(document.getElementById("pmode").checked){
  query.push("p=true");}
 //留置
 if(document.getElementById("depotmode").checked){
  query.push("d=true");}
 //休・未確認
 if(document.getElementById("usemode").checked){
  query.push("r=true");}

window.open(location.href.replace(location.search,"")+"?"+query.join("&"));

}

window.onload = function() {
  const spinner = document.getElementById('loading');
  spinner.classList.add('loaded');
  auto();
}


</script>
</body>
</html>